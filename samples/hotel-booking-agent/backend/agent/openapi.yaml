openapi: 3.1.0
info:
  title: Hotel Booking Agent
  version: 0.1.0
  description: AI-powered travel planning agent that provides personalized travel recommendations and itineraries

servers:
  - url: http://localhost:9090
    description: Local development server
  - url: https://api.yourcompany.com
    description: Production server

paths:
  /chat:
    post:
      summary: Send Message to Agent
      description: Send a chat message to the AI agent and receive travel recommendations, itineraries, or answers to travel-related questions
      operationId: chat_chat_post
      security:
        - bearerAuth: []
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/ChatRequest"
            examples:
              simple_query:
                summary: Simple travel query
                value:
                  message: "Plan a 5-day trip to Tokyo"
              with_session:
                summary: Continuing conversation
                value:
                  message: "What about hotels near Shibuya?"
                  sessionId: "session_abc123"
      responses:
        '200':
          description: Successfully processed the message and generated a response
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ChatResponse"
              examples:
                itinerary_response:
                  summary: Travel itinerary response
                  value:
                    message: "Here's a suggested 5-day Tokyo itinerary: Day 1: Explore Shibuya and Harajuku..."
                hotel_response:
                  summary: Hotel recommendations
                  value:
                    message: "Here are some great hotels near Shibuya: 1. Shibuya Excel Hotel..."
        '422':
          description: Validation error - invalid request format
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/HTTPValidationError"
        '401':
          description: Unauthorized - missing or invalid access token
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
        '500':
          description: Internal server error
          content:
            application/json:
              schema:
                type: object
                properties:
                  error:
                    type: string
                    example: "An unexpected error occurred"

components:
  securitySchemes:
    bearerAuth:
      type: http
      scheme: bearer
      bearerFormat: JWT
  schemas:
    ChatRequest:
      type: object
      required:
        - message
      properties:
        message:
          type: string
          title: Message
          description: The user's chat message or travel query
          example: "Plan a 5-day trip to Tokyo"
          minLength: 1
        sessionId:
          anyOf:
            - type: string
            - type: null
          title: SessionId
          description: Optional session identifier for maintaining conversation context
          example: "session_abc123"
      title: ChatRequest

    ChatResponse:
      type: object
      required:
        - message
      properties:
        message:
          type: string
          title: Message
          description: The AI agent's response with travel recommendations or information
          example: "Here's a suggested 5-day Tokyo itinerary: Day 1: Visit Senso-ji Temple and explore Asakusa..."
      title: ChatResponse

    ErrorResponse:
      type: object
      properties:
        detail:
          type: string
          example: "Invalid access token."
      title: ErrorResponse

    HTTPValidationError:
      type: object
      properties:
        detail:
          type: array
          items:
            $ref: "#/components/schemas/ValidationError"
          title: Detail
      title: HTTPValidationError

    ValidationError:
      type: object
      required:
        - loc
        - msg
        - type
      properties:
        loc:
          type: array
          items:
            anyOf:
              - type: string
              - type: integer
          title: Location
          description: The location of the validation error in the request
        msg:
          type: string
          title: Message
          description: Human-readable error message
        type:
          type: string
          title: Error Type
          description: The type of validation error
      title: ValidationError
