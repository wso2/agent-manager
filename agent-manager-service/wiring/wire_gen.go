// Code generated by Wire. DO NOT EDIT.

//go:generate go run -mod=mod github.com/google/wire/cmd/wire
//go:build !wireinject
// +build !wireinject

package wiring

import (
	"log/slog"
	"time"

	"github.com/google/wire"
	"gorm.io/gorm"

	"github.com/wso2/ai-agent-management-platform/agent-manager-service/clients/observabilitysvc"
	"github.com/wso2/ai-agent-management-platform/agent-manager-service/clients/openchoreosvc/client"
	"github.com/wso2/ai-agent-management-platform/agent-manager-service/clients/traceobserversvc"
	"github.com/wso2/ai-agent-management-platform/agent-manager-service/config"
	"github.com/wso2/ai-agent-management-platform/agent-manager-service/controllers"
	"github.com/wso2/ai-agent-management-platform/agent-manager-service/middleware/jwtassertion"
	"github.com/wso2/ai-agent-management-platform/agent-manager-service/repositories"
	"github.com/wso2/ai-agent-management-platform/agent-manager-service/services"
	"github.com/wso2/ai-agent-management-platform/agent-manager-service/websocket"
)

// Injectors from wire.go:

// InitializeAppParams wires up all application dependencies
func InitializeAppParams(cfg *config.Config, db *gorm.DB, authProvider client.AuthProvider) (*AppParams, error) {
	configConfig := ProvideConfigFromPtr(cfg)
	middleware := ProvideAuthMiddleware(configConfig)
	logger := ProvideLogger()
	openChoreoClient, err := ProvideOCClient(configConfig, authProvider)
	if err != nil {
		return nil, err
	}
	observabilitySvcClient, err := ProvideObservabilitySvcClient(configConfig, authProvider)
	if err != nil {
		return nil, err
	}
	repositoryService := services.NewRepositoryService()
	jwtSigningConfig := ProvideJWTSigningConfig(configConfig)
	agentTokenManagerService, err := services.NewAgentTokenManagerService(openChoreoClient, jwtSigningConfig, logger)
	if err != nil {
		return nil, err
	}
	agentManagerService := services.NewAgentManagerService(openChoreoClient, observabilitySvcClient, repositoryService, agentTokenManagerService, logger)
	agentController := controllers.NewAgentController(agentManagerService)
	infraResourceManager := services.NewInfraResourceManager(openChoreoClient, logger)
	infraResourceController := controllers.NewInfraResourceController(infraResourceManager)
	traceObserverClient := traceobserversvc.NewTraceObserverClient()
	observabilityManagerService := services.NewObservabilityManager(traceObserverClient, openChoreoClient, logger)
	observabilityController := controllers.NewObservabilityController(observabilityManagerService)
	agentTokenController := controllers.NewAgentTokenController(agentTokenManagerService)
	repositoryController := controllers.NewRepositoryController(repositoryService)
	gatewayRepository := ProvideGatewayRepository(db)
	environmentService := services.NewEnvironmentService(logger, gatewayRepository, openChoreoClient)
	environmentController := controllers.NewEnvironmentController(environmentService)
	platformGatewayService := services.NewPlatformGatewayService(gatewayRepository)
	gatewayController := controllers.NewGatewayController(platformGatewayService, openChoreoClient)
	llmProviderTemplateRepository := ProvideLLMProviderTemplateRepository(db)
	llmProviderTemplateService := services.NewLLMProviderTemplateService(llmProviderTemplateRepository)
	llmProviderRepository := ProvideLLMProviderRepository(db)
	llmProxyRepository := ProvideLLMProxyRepository(db)
	artifactRepository := ProvideArtifactRepository(db)
	llmProviderService := services.NewLLMProviderService(db, llmProviderRepository, llmProviderTemplateRepository, llmProxyRepository, artifactRepository)
	llmProxyService := services.NewLLMProxyService(llmProxyRepository, llmProviderRepository)
	deploymentRepository := ProvideDeploymentRepository(db)
	manager := ProvideWebSocketManager(configConfig)
	gatewayEventsService := services.NewGatewayEventsService(manager)
	llmProviderDeploymentService := services.NewLLMProviderDeploymentService(deploymentRepository, llmProviderRepository, llmProviderTemplateRepository, gatewayRepository, gatewayEventsService)
	llmController := controllers.NewLLMController(llmProviderTemplateService, llmProviderService, llmProxyService, llmProviderDeploymentService, artifactRepository, openChoreoClient)
	llmDeploymentController := controllers.NewLLMDeploymentController(llmProviderDeploymentService)
	llmProviderAPIKeyService := services.NewLLMProviderAPIKeyService(llmProviderRepository, gatewayRepository, gatewayEventsService)
	llmProviderAPIKeyController := controllers.NewLLMProviderAPIKeyController(llmProviderAPIKeyService)
	llmProxyAPIKeyService := services.NewLLMProxyAPIKeyService(llmProxyRepository, gatewayRepository, gatewayEventsService)
	llmProxyAPIKeyController := controllers.NewLLMProxyAPIKeyController(llmProxyAPIKeyService)
	llmProxyDeploymentService := services.NewLLMProxyDeploymentService(deploymentRepository, llmProxyRepository, llmProviderRepository, gatewayRepository, gatewayEventsService)
	llmProxyDeploymentController := controllers.NewLLMProxyDeploymentController(llmProxyDeploymentService)
	webSocketController := ProvideWebSocketController(manager, platformGatewayService, configConfig)
	gatewayInternalAPIService := services.NewGatewayInternalAPIService(llmProviderRepository, llmProxyRepository, deploymentRepository, gatewayRepository, infraResourceManager)
	gatewayInternalController := controllers.NewGatewayInternalController(platformGatewayService, gatewayInternalAPIService)
	monitorExecutor := services.NewMonitorExecutor(openChoreoClient, logger)
	evaluatorManagerService := services.NewEvaluatorManagerService(logger)
	monitorManagerService := services.NewMonitorManagerService(logger, openChoreoClient, observabilitySvcClient, monitorExecutor, evaluatorManagerService)
	monitorController := controllers.NewMonitorController(monitorManagerService)
	scoreRepository := ProvideScoreRepository(db)
	monitorScoresService := services.NewMonitorScoresService(scoreRepository, logger)
	monitorScoresController := controllers.NewMonitorScoresController(monitorScoresService)
	monitorScoresPublisherController := controllers.NewMonitorScoresPublisherController(monitorScoresService, configConfig)
	evaluatorController := controllers.NewEvaluatorController(evaluatorManagerService)
	catalogRepository := ProvideCatalogRepository(db)
	catalogService := services.NewCatalogService(logger, catalogRepository, openChoreoClient)
	catalogController := controllers.NewCatalogController(catalogService)
	monitorSchedulerService := services.NewMonitorSchedulerService(openChoreoClient, logger, monitorExecutor)
	llmTemplateSeeder := ProvideLLMTemplateSeeder(llmProviderTemplateRepository)
	appParams := &AppParams{
		AuthMiddleware:                   middleware,
		Logger:                           logger,
		AgentController:                  agentController,
		InfraResourceController:          infraResourceController,
		ObservabilityController:          observabilityController,
		AgentTokenController:             agentTokenController,
		RepositoryController:             repositoryController,
		EnvironmentController:            environmentController,
		GatewayController:                gatewayController,
		LLMController:                    llmController,
		LLMDeploymentController:          llmDeploymentController,
		LLMProviderAPIKeyController:      llmProviderAPIKeyController,
		LLMProxyAPIKeyController:         llmProxyAPIKeyController,
		LLMProxyDeploymentController:     llmProxyDeploymentController,
		WebSocketController:              webSocketController,
		GatewayInternalController:        gatewayInternalController,
		MonitorController:                monitorController,
		MonitorScoresController:          monitorScoresController,
		MonitorScoresPublisherController: monitorScoresPublisherController,
		EvaluatorController:              evaluatorController,
		CatalogController:                catalogController,
		MonitorScheduler:                 monitorSchedulerService,
		LLMTemplateSeeder:                llmTemplateSeeder,
		OpenChoreoClient:                 openChoreoClient,
		WebSocketManager:                 manager,
		DB:                               db,
	}
	return appParams, nil
}

// InitializeTestAppParamsWithClientMocks wires up application dependencies with test mocks
func InitializeTestAppParamsWithClientMocks(cfg *config.Config, db *gorm.DB, authMiddleware jwtassertion.Middleware, testClients TestClients) (*AppParams, error) {
	logger := ProvideLogger()
	openChoreoClient := ProvideTestOpenChoreoClient(testClients)
	observabilitySvcClient := ProvideTestObservabilitySvcClient(testClients)
	repositoryService := services.NewRepositoryService()
	configConfig := ProvideConfigFromPtr(cfg)
	jwtSigningConfig := ProvideJWTSigningConfig(configConfig)
	agentTokenManagerService, err := services.NewAgentTokenManagerService(openChoreoClient, jwtSigningConfig, logger)
	if err != nil {
		return nil, err
	}
	agentManagerService := services.NewAgentManagerService(openChoreoClient, observabilitySvcClient, repositoryService, agentTokenManagerService, logger)
	agentController := controllers.NewAgentController(agentManagerService)
	infraResourceManager := services.NewInfraResourceManager(openChoreoClient, logger)
	infraResourceController := controllers.NewInfraResourceController(infraResourceManager)
	traceObserverClient := ProvideTestTraceObserverClient(testClients)
	observabilityManagerService := services.NewObservabilityManager(traceObserverClient, openChoreoClient, logger)
	observabilityController := controllers.NewObservabilityController(observabilityManagerService)
	agentTokenController := controllers.NewAgentTokenController(agentTokenManagerService)
	repositoryController := controllers.NewRepositoryController(repositoryService)
	gatewayRepository := ProvideGatewayRepository(db)
	environmentService := services.NewEnvironmentService(logger, gatewayRepository, openChoreoClient)
	environmentController := controllers.NewEnvironmentController(environmentService)
	platformGatewayService := services.NewPlatformGatewayService(gatewayRepository)
	gatewayController := controllers.NewGatewayController(platformGatewayService, openChoreoClient)
	llmProviderTemplateRepository := ProvideLLMProviderTemplateRepository(db)
	llmProviderTemplateService := services.NewLLMProviderTemplateService(llmProviderTemplateRepository)
	llmProviderRepository := ProvideLLMProviderRepository(db)
	llmProxyRepository := ProvideLLMProxyRepository(db)
	artifactRepository := ProvideArtifactRepository(db)
	llmProviderService := services.NewLLMProviderService(db, llmProviderRepository, llmProviderTemplateRepository, llmProxyRepository, artifactRepository)
	llmProxyService := services.NewLLMProxyService(llmProxyRepository, llmProviderRepository)
	deploymentRepository := ProvideDeploymentRepository(db)
	manager := ProvideWebSocketManager(configConfig)
	gatewayEventsService := services.NewGatewayEventsService(manager)
	llmProviderDeploymentService := services.NewLLMProviderDeploymentService(deploymentRepository, llmProviderRepository, llmProviderTemplateRepository, gatewayRepository, gatewayEventsService)
	llmController := controllers.NewLLMController(llmProviderTemplateService, llmProviderService, llmProxyService, llmProviderDeploymentService, artifactRepository, openChoreoClient)
	llmDeploymentController := controllers.NewLLMDeploymentController(llmProviderDeploymentService)
	llmProviderAPIKeyService := services.NewLLMProviderAPIKeyService(llmProviderRepository, gatewayRepository, gatewayEventsService)
	llmProviderAPIKeyController := controllers.NewLLMProviderAPIKeyController(llmProviderAPIKeyService)
	llmProxyAPIKeyService := services.NewLLMProxyAPIKeyService(llmProxyRepository, gatewayRepository, gatewayEventsService)
	llmProxyAPIKeyController := controllers.NewLLMProxyAPIKeyController(llmProxyAPIKeyService)
	llmProxyDeploymentService := services.NewLLMProxyDeploymentService(deploymentRepository, llmProxyRepository, llmProviderRepository, gatewayRepository, gatewayEventsService)
	llmProxyDeploymentController := controllers.NewLLMProxyDeploymentController(llmProxyDeploymentService)
	webSocketController := ProvideWebSocketController(manager, platformGatewayService, configConfig)
	gatewayInternalAPIService := services.NewGatewayInternalAPIService(llmProviderRepository, llmProxyRepository, deploymentRepository, gatewayRepository, infraResourceManager)
	gatewayInternalController := controllers.NewGatewayInternalController(platformGatewayService, gatewayInternalAPIService)
	monitorExecutor := services.NewMonitorExecutor(openChoreoClient, logger)
	evaluatorManagerService := services.NewEvaluatorManagerService(logger)
	monitorManagerService := services.NewMonitorManagerService(logger, openChoreoClient, observabilitySvcClient, monitorExecutor, evaluatorManagerService)
	monitorController := controllers.NewMonitorController(monitorManagerService)
	scoreRepository := ProvideScoreRepository(db)
	monitorScoresService := services.NewMonitorScoresService(scoreRepository, logger)
	monitorScoresController := controllers.NewMonitorScoresController(monitorScoresService)
	monitorScoresPublisherController := controllers.NewMonitorScoresPublisherController(monitorScoresService, configConfig)
	evaluatorController := controllers.NewEvaluatorController(evaluatorManagerService)
	catalogRepository := ProvideCatalogRepository(db)
	catalogService := services.NewCatalogService(logger, catalogRepository, openChoreoClient)
	catalogController := controllers.NewCatalogController(catalogService)
	monitorSchedulerService := services.NewMonitorSchedulerService(openChoreoClient, logger, monitorExecutor)
	llmTemplateSeeder := ProvideLLMTemplateSeeder(llmProviderTemplateRepository)
	appParams := &AppParams{
		AuthMiddleware:                   authMiddleware,
		Logger:                           logger,
		AgentController:                  agentController,
		InfraResourceController:          infraResourceController,
		ObservabilityController:          observabilityController,
		AgentTokenController:             agentTokenController,
		RepositoryController:             repositoryController,
		EnvironmentController:            environmentController,
		GatewayController:                gatewayController,
		LLMController:                    llmController,
		LLMDeploymentController:          llmDeploymentController,
		LLMProviderAPIKeyController:      llmProviderAPIKeyController,
		LLMProxyAPIKeyController:         llmProxyAPIKeyController,
		LLMProxyDeploymentController:     llmProxyDeploymentController,
		WebSocketController:              webSocketController,
		GatewayInternalController:        gatewayInternalController,
		MonitorController:                monitorController,
		MonitorScoresController:          monitorScoresController,
		MonitorScoresPublisherController: monitorScoresPublisherController,
		EvaluatorController:              evaluatorController,
		CatalogController:                catalogController,
		MonitorScheduler:                 monitorSchedulerService,
		LLMTemplateSeeder:                llmTemplateSeeder,
		OpenChoreoClient:                 openChoreoClient,
		WebSocketManager:                 manager,
		DB:                               db,
	}
	return appParams, nil
}

// wire.go:

// Provider sets
var configProviderSet = wire.NewSet(
	ProvideConfigFromPtr,
)

var clientProviderSet = wire.NewSet(
	ProvideObservabilitySvcClient, traceobserversvc.NewTraceObserverClient, ProvideOCClient,
)

var serviceProviderSet = wire.NewSet(services.NewAgentManagerService, services.NewInfraResourceManager, services.NewObservabilityManager, services.NewAgentTokenManagerService, services.NewRepositoryService, services.NewMonitorExecutor, services.NewMonitorManagerService, services.NewMonitorSchedulerService, services.NewEvaluatorManagerService, services.NewEnvironmentService, services.NewPlatformGatewayService, services.NewLLMProviderTemplateService, services.NewLLMProviderService, services.NewLLMProxyService, services.NewLLMProviderDeploymentService, services.NewLLMProviderAPIKeyService, services.NewLLMProxyAPIKeyService, services.NewLLMProxyDeploymentService, services.NewGatewayInternalAPIService, services.NewMonitorScoresService, services.NewCatalogService, ProvideLLMTemplateSeeder)

var controllerProviderSet = wire.NewSet(controllers.NewAgentController, controllers.NewInfraResourceController, controllers.NewObservabilityController, controllers.NewAgentTokenController, controllers.NewRepositoryController, controllers.NewEnvironmentController, controllers.NewGatewayController, controllers.NewLLMController, controllers.NewLLMDeploymentController, controllers.NewLLMProviderAPIKeyController, controllers.NewLLMProxyAPIKeyController, controllers.NewLLMProxyDeploymentController, ProvideWebSocketController, controllers.NewGatewayInternalController, controllers.NewMonitorController, controllers.NewMonitorScoresController, controllers.NewMonitorScoresPublisherController, controllers.NewEvaluatorController, controllers.NewCatalogController)

var testClientProviderSet = wire.NewSet(
	ProvideTestOpenChoreoClient,
	ProvideTestObservabilitySvcClient,
	ProvideTestTraceObserverClient,
)

// ProvideLogger provides the configured slog.Logger instance
func ProvideLogger() *slog.Logger {
	return slog.Default()
}

// ProvideOCClient creates the OpenChoreo client
func ProvideOCClient(cfg config.Config, authProvider client.AuthProvider) (client.OpenChoreoClient, error) {
	return client.NewOpenChoreoClient(&client.Config{
		BaseURL:      cfg.OpenChoreo.BaseURL,
		AuthProvider: authProvider,
	})
}

// ProvideObservabilitySvcClient creates the observability service client
func ProvideObservabilitySvcClient(cfg config.Config, authProvider client.AuthProvider) (observabilitysvc.ObservabilitySvcClient, error) {
	return observabilitysvc.NewObservabilitySvcClient(&observabilitysvc.Config{
		BaseURL:      cfg.Observer.URL,
		AuthProvider: authProvider,
	})
}

var loggerProviderSet = wire.NewSet(
	ProvideLogger,
)

var repositoryProviderSet = wire.NewSet(
	ProvideGatewayRepository,
	ProvideLLMProviderTemplateRepository,
	ProvideLLMProviderRepository,
	ProvideLLMProxyRepository,
	ProvideDeploymentRepository,
	ProvideArtifactRepository,
	ProvideScoreRepository,
	ProvideCatalogRepository,
)

var websocketProviderSet = wire.NewSet(
	ProvideWebSocketManager, services.NewGatewayEventsService,
)

// Test client providers
func ProvideTestOpenChoreoClient(testClients TestClients) client.OpenChoreoClient {
	return testClients.OpenChoreoClient
}

func ProvideTestObservabilitySvcClient(testClients TestClients) observabilitysvc.ObservabilitySvcClient {
	return testClients.ObservabilitySvcClient
}

func ProvideTestTraceObserverClient(testClients TestClients) traceobserversvc.TraceObserverClient {
	return testClients.TraceObserverClient
}

// ProvideWebSocketManager creates a new WebSocket manager with config
func ProvideWebSocketManager(cfg config.Config) *websocket.Manager {
	wsConfig := websocket.ManagerConfig{
		MaxConnections:    cfg.WebSocket.MaxConnections,
		HeartbeatInterval: 20 * time.Second,
		HeartbeatTimeout:  time.Duration(cfg.WebSocket.ConnectionTimeout) * time.Second,
	}
	return websocket.NewManager(wsConfig)
}

// ProvideWebSocketController creates a new WebSocket controller with rate limiting
func ProvideWebSocketController(
	manager *websocket.Manager,
	gatewayService *services.PlatformGatewayService,
	cfg config.Config,
) controllers.WebSocketController {
	rateLimitCount := cfg.WebSocket.RateLimitPerMin
	return controllers.NewWebSocketController(manager, gatewayService, rateLimitCount)
}

func ProvideGatewayRepository(db *gorm.DB) repositories.GatewayRepository {
	return repositories.NewGatewayRepo(db)
}

func ProvideLLMProviderTemplateRepository(db *gorm.DB) repositories.LLMProviderTemplateRepository {
	return repositories.NewLLMProviderTemplateRepo(db)
}

func ProvideLLMProviderRepository(db *gorm.DB) repositories.LLMProviderRepository {
	return repositories.NewLLMProviderRepo(db)
}

func ProvideLLMProxyRepository(db *gorm.DB) repositories.LLMProxyRepository {
	return repositories.NewLLMProxyRepo(db)
}

func ProvideDeploymentRepository(db *gorm.DB) repositories.DeploymentRepository {
	return repositories.NewDeploymentRepo(db)
}

func ProvideArtifactRepository(db *gorm.DB) repositories.ArtifactRepository {
	return repositories.NewArtifactRepo(db)
}

func ProvideScoreRepository(db *gorm.DB) repositories.ScoreRepository {
	return repositories.NewScoreRepo(db)
}

func ProvideCatalogRepository(db *gorm.DB) repositories.CatalogRepository {
	return repositories.NewCatalogRepo(db)
}

// ProvideLLMTemplateSeeder creates a new LLM template seeder with empty templates
// Templates will be loaded at startup in main.go
func ProvideLLMTemplateSeeder(templateRepo repositories.LLMProviderTemplateRepository) *services.LLMTemplateSeeder {

	return services.NewLLMTemplateSeeder(templateRepo, nil)
}
