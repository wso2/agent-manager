openapi: 3.0.3
info:
  version: 1.0.0
  title: Agent Manager Service API
servers:
  - url: /api/v1
paths:
  /orgs:
    get:
      summary: List all organizations
      operationId: listOrganizations
      parameters:
        - name: limit
          in: query
          description: Maximum number of results to return
          required: false
          schema:
            type: integer
            default: 10
            minimum: 1
            maximum: 50
        - name: offset
          in: query
          description: Number of results to skip
          required: false
          schema:
            type: integer
            default: 0
            minimum: 0
      responses:
        "200":
          description: List of organizations
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/OrganizationListResponse"
        "400":
          description: Invalid request parameters
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
        "500":
          description: Internal server error
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
    post:
      summary: Create a new organization
      operationId: createOrganization
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/CreateOrganizationRequest"
      responses:
        "202":
          description: Organization creation initiated successfully
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/OrganizationResponse"
        "400":
          description: Invalid request
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
        "500":
          description: Internal server error
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"

  /orgs/{orgName}:
    get:
      summary: Get organization details
      operationId: getOrganization
      parameters:
        - name: orgName
          in: path
          required: true
          schema:
            type: string
      responses:
        "200":
          description: Organization details
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/OrganizationResponse"
        "404":
          description: Organization not found
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
        "500":
          description: Internal server error
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"

  /orgs/{orgName}/deployment-pipelines:
    get:
      summary: List all deployment pipelines in an organization
      operationId: listDeploymentPipelines
      parameters:
        - name: orgName
          in: path
          required: true
          schema:
            type: string
        - name: limit
          in: query
          description: Maximum number of results to return
          required: false
          schema:
            type: integer
            default: 10
            minimum: 1
            maximum: 50
        - name: offset
          in: query
          description: Number of results to skip
          required: false
          schema:
            type: integer
            default: 0
            minimum: 0
      responses:
        "200":
          description: List of deployment pipelines
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/DeploymentPipelineListResponse"
        "400":
          description: Invalid request parameters
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
        "404":
          description: Organization not found
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
        "500":
          description: Internal server error
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"

  /orgs/{orgName}/projects:
    post:
      summary: Create a new project
      operationId: createProject
      parameters:
        - name: orgName
          in: path
          required: true
          schema:
            type: string
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/CreateProjectRequest"
      responses:
        "202":
          description: Project creation initiated successfully
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ProjectResponse"
        "400":
          description: Invalid request
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
        "404":
          description: Organization not found
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
        "409":
          description: Project already exists
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
        "500":
          description: Internal server error
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
    get:
      summary: List all projects in an organization
      operationId: listProjects
      parameters:
        - name: orgName
          in: path
          required: true
          schema:
            type: string
        - name: limit
          in: query
          description: Maximum number of results to return
          required: false
          schema:
            type: integer
            default: 10
            minimum: 1
            maximum: 50
        - name: offset
          in: query
          description: Number of results to skip
          required: false
          schema:
            type: integer
            default: 0
            minimum: 0
      responses:
        "200":
          description: List of projects
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ProjectListResponse"
        "400":
          description: Invalid request parameters
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
        "404":
          description: Organization not found
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
        "500":
          description: Internal server error
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"

  /orgs/{orgName}/projects/{projName}:
    get:
      summary: Get project details
      operationId: getProject
      parameters:
        - name: orgName
          in: path
          required: true
          schema:
            type: string
        - name: projName
          in: path
          required: true
          schema:
            type: string
      responses:
        "200":
          description: Project details
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ProjectResponse"
        "404":
          description: Project not found
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
        "500":
          description: Internal server error
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
    put:
      summary: Update project
      operationId: updateProject
      parameters:
        - name: orgName
          in: path
          required: true
          schema:
            type: string
        - name: projName
          in: path
          required: true
          schema:
            type: string
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/UpdateProjectRequest"
      responses:
        "200":
          description: Project updated successfully
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ProjectResponse"
        "400":
          description: Invalid request
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
        "404":
          description: Project not found
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
        "500":
          description: Internal server error
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
    delete:
      summary: Delete a project
      operationId: deleteProject
      parameters:
        - name: orgName
          in: path
          required: true
          schema:
            type: string
        - name: projName
          in: path
          required: true
          schema:
            type: string
      responses:
        "204":
          description: Project deleted successfully
        "404":
          description: Project not found
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
        "500":
          description: Internal server error
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"

  /orgs/{orgName}/projects/{projName}/agents:
    post:
      summary: Create a new agent
      operationId: createAgent
      parameters:
        - name: orgName
          in: path
          required: true
          schema:
            type: string
        - name: projName
          in: path
          required: true
          schema:
            type: string
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/CreateAgentRequest"
      responses:
        "202":
          description: Agent creation initiated successfully
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/AgentResponse"
        "400":
          description: Invalid request
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
        "409":
          description: Agent already exists
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
        "500":
          description: Internal server error
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"

    get:
      summary: List all agents in a project of an organization
      operationId: listAgents
      parameters:
        - name: orgName
          in: path
          required: true
          schema:
            type: string
        - name: projName
          in: path
          required: true
          schema:
            type: string
        - name: limit
          in: query
          description: Maximum number of results to return
          required: false
          schema:
            type: integer
            default: 10
            minimum: 1
            maximum: 50
        - name: offset
          in: query
          description: Number of results to skip
          required: false
          schema:
            type: integer
            default: 0
            minimum: 0
      responses:
        "200":
          description: List of agents
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/AgentListResponse"
        "400":
          description: Invalid request parameters
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
        "500":
          description: Internal server error
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"

  /orgs/{orgName}/projects/{projName}/agents/{agentName}:
    get:
      summary: Get agent details
      operationId: getAgent
      parameters:
        - name: agentName
          in: path
          required: true
          schema:
            type: string
        - name: orgName
          in: path
          required: true
          schema:
            type: string
        - name: projName
          in: path
          required: true
          schema:
            type: string
      responses:
        "200":
          description: Agent details
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/AgentResponse"
        "404":
          description: Agent not found
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
        "500":
          description: Internal server error
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
    put:
      summary: Update agent basic information
      operationId: updateAgent
      parameters:
        - name: agentName
          in: path
          required: true
          schema:
            type: string
        - name: orgName
          in: path
          required: true
          schema:
            type: string
        - name: projName
          in: path
          required: true
          schema:
            type: string
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/UpdateAgentBasicInfoRequest"
      responses:
        "200":
          description: Agent updated successfully
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/AgentResponse"
        "400":
          description: Invalid request
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
        "404":
          description: Agent not found
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
        "500":
          description: Internal server error
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
    delete:
      summary: Delete agent
      operationId: deleteAgent
      parameters:
        - name: agentName
          in: path
          required: true
          schema:
            type: string
        - name: orgName
          in: path
          required: true
          schema:
            type: string
        - name: projName
          in: path
          required: true
          schema:
            type: string
      responses:
        "204":
          description: Agent deleted successfully
        "404":
          description: Agent not found
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
        "500":
          description: Internal server error
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"

  /orgs/{orgName}/projects/{projName}/agents/{agentName}/build-parameters:
    put:
      summary: Update agent build parameters
      operationId: updateAgentBuildParameters
      parameters:
        - name: agentName
          in: path
          required: true
          schema:
            type: string
        - name: orgName
          in: path
          required: true
          schema:
            type: string
        - name: projName
          in: path
          required: true
          schema:
            type: string
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/UpdateAgentBuildParametersRequest"
      responses:
        "200":
          description: Agent build parameters updated successfully
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/AgentResponse"
        "400":
          description: Invalid request
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
        "404":
          description: Agent not found
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
        "500":
          description: Internal server error
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"

  /orgs/{orgName}/projects/{projName}/agents/{agentName}/resource-configs:
    get:
      summary: Get agent resource configurations
      operationId: getAgentResourceConfigs
      parameters:
        - name: agentName
          in: path
          required: true
          schema:
            type: string
        - name: orgName
          in: path
          required: true
          schema:
            type: string
        - name: projName
          in: path
          required: true
          schema:
            type: string
        - name: environment
          in: query
          description: Optional environment name. If omitted, returns component-level defaults. If provided, returns environment-specific overrides (if any) along with component defaults and isDefaultsOverridden flag.
          required: false
          schema:
            type: string
      responses:
        "200":
          description: Agent resource configurations retrieved successfully
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/AgentResourceConfigsResponse"
        "404":
          description: Agent or environment not found
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
        "500":
          description: Internal server error
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
    put:
      summary: Update agent resource configurations
      operationId: updateAgentResourceConfigs
      parameters:
        - name: agentName
          in: path
          required: true
          schema:
            type: string
        - name: orgName
          in: path
          required: true
          schema:
            type: string
        - name: projName
          in: path
          required: true
          schema:
            type: string
        - name: environment
          in: query
          description: Optional environment name. If provided, updates only that environment's resource configurations via release binding componentTypeEnvOverrides. If omitted, updates component-level defaults that apply to all environments (unless overridden).
          required: false
          schema:
            type: string
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/UpdateAgentResourceConfigsRequest"
      responses:
        "200":
          description: Agent resource configurations updated successfully
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/AgentResourceConfigsResponse"
        "400":
          description: Invalid request
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
        "404":
          description: Agent not found
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
        "500":
          description: Internal server error
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"

  /orgs/{orgName}/utils/generate-name:
    post:
      summary: Get name by display name
      description: Retrieve name using display name for a specific resource
      operationId: getNameByDisplayName
      parameters:
        - name: orgName
          in: path
          description: Organization name
          required: true
          schema:
            type: string
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/ResourceNameRequest"
      responses:
        "200":
          description: Agent name retrieved successfully
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ResourceNameResponse"
        "404":
          description: Agent not found
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
        "500":
          description: Internal server error
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"

  /orgs/{orgName}/projects/{projName}/agents/{agentName}/builds:
    post:
      summary: Build an agent
      operationId: buildAgent
      parameters:
        - name: agentName
          in: path
          required: true
          schema:
            type: string
        - name: orgName
          in: path
          required: true
          schema:
            type: string
        - name: projName
          in: path
          required: true
          schema:
            type: string
        - name: commitId
          in: query
          schema:
            type: string
      responses:
        "202":
          description: Build initiated successfully
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/BuildResponse"
        "400":
          description: Invalid request
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
        "404":
          description: Agent not found
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
        "500":
          description: Internal server error
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
    get:
      summary: Get Builds of an Agent
      operationId: getAgentBuilds
      parameters:
        - name: agentName
          in: path
          required: true
          schema:
            type: string
        - name: orgName
          in: path
          required: true
          schema:
            type: string
        - name: projName
          in: path
          required: true
          schema:
            type: string
        - name: limit
          in: query
          description: Maximum number of results to return
          required: false
          schema:
            type: integer
            default: 10
            minimum: 1
            maximum: 50
        - name: offset
          in: query
          description: Number of results to skip
          required: false
          schema:
            type: integer
            default: 0
            minimum: 0
      responses:
        "200":
          description: fetch builds successfully
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/BuildsListResponse"
        "400":
          description: Invalid request
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
        "404":
          description: Agent not found
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
        "500":
          description: Internal server error
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
  /orgs/{orgName}/projects/{projName}/agents/{agentName}/builds/{buildName}:
    get:
      summary: Get build details
      operationId: getBuild
      parameters:
        - name: orgName
          in: path
          required: true
          schema:
            type: string
        - name: projName
          in: path
          required: true
          schema:
            type: string
        - name: agentName
          in: path
          required: true
          schema:
            type: string
        - name: buildName
          in: path
          required: true
          schema:
            type: string
      responses:
        "200":
          description: Build details
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/BuildDetailsResponse"
        "404":
          description: Build not found
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
        "500":
          description: Internal server error
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
  /orgs/{orgName}/projects/{projName}/agents/{agentName}/builds/{buildName}/build-logs:
    get:
      summary: Get build logs
      operationId: getBuildLogs
      parameters:
        - name: orgName
          in: path
          required: true
          schema:
            type: string
        - name: projName
          in: path
          required: true
          schema:
            type: string
        - name: agentName
          in: path
          required: true
          schema:
            type: string
        - name: buildName
          in: path
          required: true
          schema:
            type: string
      responses:
        "200":
          description: Build logs
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/LogsResponse"
        "404":
          description: Build not found
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
        "500":
          description: Internal server error
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"

  /orgs/{orgName}/projects/{projName}/agents/{agentName}/deployments:
    post:
      summary: Deploy an agent
      operationId: deployAgent
      parameters:
        - name: agentName
          in: path
          required: true
          schema:
            type: string
        - name: orgName
          in: path
          required: true
          schema:
            type: string
        - name: projName
          in: path
          required: true
          schema:
            type: string
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/DeployAgentRequest"
      responses:
        "202":
          description: Agent deployed successfully
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/DeploymentResponse"
        "400":
          description: Invalid request
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
        "404":
          description: Agent not found
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
        "500":
          description: Internal server error
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"

    get:
      summary: List agent deployments with detailed information
      description: Retrieves detailed deployment information for a specific agent across all environments
      operationId: listAgentDeployments
      parameters:
        - name: agentName
          in: path
          description: Unique name of the agent
          required: true
          schema:
            type: string
        - name: orgName
          in: path
          description: Organization name
          required: true
          schema:
            type: string
        - name: projName
          in: path
          description: Project name
          required: true
          schema:
            type: string
      responses:
        "200":
          description: Map of environment names to deployment details, ordered by deployment pipeline sequence
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/DeploymentListResponse"
        "404":
          description: Agent not found
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
        "500":
          description: Internal server error
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"

  /orgs/{orgName}/projects/{projName}/agents/{agentName}/endpoints:
    get:
      summary: Get agent endpoints for a specific environment
      description: Retrieves endpoint configurations for an agent in a specific environment
      operationId: getAgentEndpoints
      parameters:
        - name: agentName
          in: path
          description: Unique name of the agent
          required: true
          schema:
            type: string
        - name: orgName
          in: path
          description: Organization name
          required: true
          schema:
            type: string
        - name: projName
          in: path
          description: Project name
          required: true
          schema:
            type: string
        - name: environment
          in: query
          description: Environment name
          required: true
          schema:
            type: string
      responses:
        "200":
          description: Map of endpoint names to endpoint configurations
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/EndpointsResponse"
        "404":
          description: Agent not found
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
        "500":
          description: Internal server error
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"

  /orgs/{orgName}/projects/{projName}/agents/{agentName}/configurations:
    get:
      summary: Get agent configurations for a specific environment
      description: Retrieves configuration settings for an agent in a specific environment
      operationId: getAgentConfigurations
      parameters:
        - name: agentName
          in: path
          description: Unique name of the agent
          required: true
          schema:
            type: string
        - name: orgName
          in: path
          description: Organization name
          required: true
          schema:
            type: string
        - name: projName
          in: path
          description: Project name
          required: true
          schema:
            type: string
        - name: environment
          in: query
          description: Environment name
          required: true
          schema:
            type: string
      responses:
        "200":
          description: Agent configuration details
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ConfigurationResponse"
        "404":
          description: Agent not found
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
        "500":
          description: Internal server error
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
  /orgs/{orgName}/projects/{projName}/agents/{agentName}/metrics:
    post:
      summary: Get agent resource metrics
      description: Retrieves CPU and memory usage metrics for an agent in a specific environment over a time range
      operationId: getAgentMetrics
      parameters:
        - name: agentName
          in: path
          description: Unique name of the agent
          required: true
          schema:
            type: string
        - name: orgName
          in: path
          description: Organization name
          required: true
          schema:
            type: string
        - name: projName
          in: path
          description: Project name
          required: true
          schema:
            type: string
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/MetricsFilterRequest"
      responses:
        "200":
          description: Resource metrics for the specified agent
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/MetricsResponse"
        "400":
          description: Invalid request parameters
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
        "404":
          description: Agent not found
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
        "500":
          description: Internal server error
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
  /orgs/{orgName}/projects/{projName}/agents/{agentName}/runtime-logs:
    post:
      summary: Get agent runtime logs with filtering
      description: Retrieves filtered runtime logs for an agent with optional time range, log level, and search filtering
      operationId: filterAgentRuntimeLogs
      parameters:
        - name: agentName
          in: path
          description: Unique name of the agent
          required: true
          schema:
            type: string
        - name: orgName
          in: path
          description: Organization name
          required: true
          schema:
            type: string
        - name: projName
          in: path
          description: Project name
          required: true
          schema:
            type: string
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/LogFilterRequest"
      responses:
        "200":
          description: A detailed list of filtered application logs for the specified agent
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/LogsResponse"
        "400":
          description: Invalid request parameters
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
        "404":
          description: Agent not found
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
        "500":
          description: Internal server error
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"

  # ============================================
  # GATEWAY ENVIRONMENT ENDPOINTS
  # ============================================

  /orgs/{orgName}/environments:
    parameters:
      - name: orgName
        in: path
        required: true
        description: Organization name/handle
        schema:
          type: string
          pattern: "^[a-z0-9-]+$"
          minLength: 1
          maxLength: 64

    get:
      tags:
        - Environments
      summary: List all environments
      description: Retrieve a paginated list of all environments for the organization
      operationId: listEnvironments
      parameters:
        - name: limit
          in: query
          description: Maximum number of results to return
          schema:
            type: integer
            format: int32
            minimum: 1
            maximum: 100
            default: 20
        - name: offset
          in: query
          description: Number of results to skip
          schema:
            type: integer
            format: int32
            minimum: 0
            default: 0
      responses:
        "200":
          description: Successfully retrieved environment list
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/EnvironmentListResponse"
        "400":
          description: Bad request - invalid parameters
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
        "401":
          description: Unauthorized - invalid or missing authentication
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
        "500":
          description: Internal server error
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"

    post:
      tags:
        - Environments
      summary: Create a new environment
      description: |
        Create a new gateway environment for the organization.

        Environment names must be unique within an organization and should be lowercase
        alphanumeric with hyphens (e.g., dev, staging, production).
      operationId: createEnvironment
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/CreateEnvironmentRequest"
      responses:
        "201":
          description: Environment created successfully
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/GatewayEnvironmentResponse"
        "400":
          description: Bad request - invalid parameters
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
        "401":
          description: Unauthorized - invalid or missing authentication
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
        "409":
          description: Conflict - resource already exists
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
        "500":
          description: Internal server error
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"

  /orgs/{orgName}/environments/{envID}:
    parameters:
      - name: orgName
        in: path
        required: true
        description: Organization name/handle
        schema:
          type: string
          pattern: "^[a-z0-9-]+$"
          minLength: 1
          maxLength: 64
      - name: envID
        in: path
        required: true
        description: Environment UUID or name
        schema:
          type: string

    get:
      tags:
        - Environments
      summary: Get environment details
      description: Retrieve detailed information about a specific environment
      operationId: getEnvironment
      responses:
        "200":
          description: Successfully retrieved environment
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/GatewayEnvironmentResponse"
        "400":
          description: Bad request - invalid parameters
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
        "401":
          description: Unauthorized - invalid or missing authentication
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
        "404":
          description: Resource not found
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
        "500":
          description: Internal server error
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"

    put:
      tags:
        - Environments
      summary: Update environment
      description: |
        Update an existing environment's properties.

        You can update the display name and description. The environment name cannot be changed.
      operationId: updateEnvironment
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/UpdateEnvironmentRequest"
      responses:
        "200":
          description: Environment updated successfully
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/GatewayEnvironmentResponse"
        "400":
          description: Bad request - invalid parameters
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
        "401":
          description: Unauthorized - invalid or missing authentication
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
        "404":
          description: Resource not found
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
        "500":
          description: Internal server error
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"

    delete:
      tags:
        - Environments
      summary: Delete environment
      description: |
        Soft delete an environment. This will also remove all gateway-environment mappings
        associated with this environment.

        The environment can be restored if needed by contacting support.
      operationId: deleteEnvironment
      responses:
        "204":
          description: Environment deleted successfully
        "400":
          description: Bad request - invalid parameters
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
        "401":
          description: Unauthorized - invalid or missing authentication
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
        "404":
          description: Resource not found
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
        "500":
          description: Internal server error
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"

  /orgs/{orgName}/environments/{envID}/gateways:
    parameters:
      - name: orgName
        in: path
        required: true
        description: Organization name/handle
        schema:
          type: string
          pattern: "^[a-z0-9-]+$"
          minLength: 1
          maxLength: 64
      - name: envID
        in: path
        required: true
        description: Environment UUID or name
        schema:
          type: string

    get:
      tags:
        - Environments
      summary: Get environment gateways
      description: |
        List all gateways mapped to a specific environment.

        This endpoint returns all gateways that are available in this environment,
        useful for understanding which gateways can be used by agents in this environment.
      operationId: getEnvironmentGateways
      responses:
        "200":
          description: Successfully retrieved gateway list
          content:
            application/json:
              schema:
                type: object
                properties:
                  gateways:
                    type: array
                    items:
                      $ref: "#/components/schemas/GatewayResponse"
        "400":
          description: Bad request - invalid parameters
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
        "401":
          description: Unauthorized - invalid or missing authentication
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
        "404":
          description: Resource not found
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
        "500":
          description: Internal server error
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"

  # ============================================
  # AI GATEWAY ENDPOINTS
  # ============================================

  /orgs/{orgName}/gateways:
    parameters:
      - name: orgName
        in: path
        required: true
        description: Organization name/handle
        schema:
          type: string
          pattern: "^[a-z0-9-]+$"
          minLength: 1
          maxLength: 64

    get:
      tags:
        - Gateways
      summary: List all gateways
      description: |
        Retrieve a paginated list of all gateways for the organization.

        Supports filtering by gateway type, status, and environment.
      operationId: listGateways
      parameters:
        - name: limit
          in: query
          description: Maximum number of results to return
          schema:
            type: integer
            format: int32
            minimum: 1
            maximum: 100
            default: 20
        - name: offset
          in: query
          description: Number of results to skip
          schema:
            type: integer
            format: int32
            minimum: 0
            default: 0
        - name: type
          in: query
          description: Filter by gateway type
          schema:
            type: string
            enum:
              - AI
              - REGULAR
        - name: status
          in: query
          description: Filter by gateway status
          schema:
            type: string
            enum:
              - ACTIVE
              - INACTIVE
              - PROVISIONING
              - ERROR
        - name: environment
          in: query
          description: Filter by environment name
          schema:
            type: string
      responses:
        "200":
          description: Successfully retrieved gateway list
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/GatewayListResponse"
        "400":
          description: Bad request - invalid parameters
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
        "401":
          description: Unauthorized - invalid or missing authentication
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
        "500":
          description: Internal server error
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"

    post:
      tags:
        - Gateways
      summary: Register a new gateway
      description: |
        Register a new AI gateway with the platform.

        **Gateway Types:**
        - REGULAR: Handles incoming API traffic
        - AI: Handles outgoing LLM/MCP traffic (used for AI agents)

        **Security Note:**
        - Gateway credentials are encrypted before storage
        - Credentials are never returned in API responses
        - Use a strong encryption key configured in GATEWAY_ENCRYPTION_KEY
      operationId: registerGateway
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/CreateGatewayRequest"
      responses:
        "201":
          description: Gateway registered successfully
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/GatewayResponse"
        "400":
          description: Bad request - invalid parameters
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
        "401":
          description: Unauthorized - invalid or missing authentication
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
        "409":
          description: Conflict - resource already exists
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
        "500":
          description: Internal server error
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"

  /orgs/{orgName}/gateways/{gatewayID}:
    parameters:
      - name: orgName
        in: path
        required: true
        description: Organization name/handle
        schema:
          type: string
          pattern: "^[a-z0-9-]+$"
          minLength: 1
          maxLength: 64
      - name: gatewayID
        in: path
        required: true
        description: Gateway UUID or name
        schema:
          type: string

    get:
      tags:
        - Gateways
      summary: Get gateway details
      description: |
        Retrieve detailed information about a specific gateway, including mapped environments.

        **Security Note:** Credentials are never returned in the response.
      operationId: getGateway
      responses:
        "200":
          description: Successfully retrieved gateway
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/GatewayResponse"
        "400":
          description: Bad request - invalid parameters
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
        "401":
          description: Unauthorized - invalid or missing authentication
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
        "404":
          description: Resource not found
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
        "500":
          description: Internal server error
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"

    put:
      tags:
        - Gateways
      summary: Update gateway
      description: |
        Update an existing gateway's properties.

        **Updatable Fields:**
        - Display name
        - Critical flag
        - Status
        - Adapter configuration
        - Credentials (re-encrypted on update)

        **Immutable Fields:**
        - Gateway name
        - Gateway type
        - VHost
        - Organization
      operationId: updateGateway
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/UpdateGatewayRequest"
      responses:
        "200":
          description: Gateway updated successfully
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/GatewayResponse"
        "400":
          description: Bad request - invalid parameters
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
        "401":
          description: Unauthorized - invalid or missing authentication
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
        "404":
          description: Resource not found
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
        "500":
          description: Internal server error
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"

    delete:
      tags:
        - Gateways
      summary: Deregister gateway
      description: |
        Soft delete a gateway. This will:
        - Mark the gateway as deleted
        - Remove all gateway-environment mappings
        - Preserve gateway data for audit/recovery

        The gateway can be restored if needed by contacting support.

        **Warning:** This operation will affect all environments using this gateway.
      operationId: deleteGateway
      responses:
        "204":
          description: Gateway deregistered successfully
        "400":
          description: Bad request - invalid parameters
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
        "401":
          description: Unauthorized - invalid or missing authentication
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
        "404":
          description: Resource not found
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
        "500":
          description: Internal server error
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"

  /orgs/{orgName}/gateways/{gatewayID}/environments:
    parameters:
      - name: orgName
        in: path
        required: true
        description: Organization name/handle
        schema:
          type: string
          pattern: "^[a-z0-9-]+$"
          minLength: 1
          maxLength: 64
      - name: gatewayID
        in: path
        required: true
        description: Gateway UUID or name
        schema:
          type: string

    get:
      tags:
        - Gateway-Environment Mappings
      summary: Get gateway environments
      description: |
        List all environments mapped to a specific gateway.

        This shows which environments can use this gateway for routing traffic.
      operationId: getGatewayEnvironments
      responses:
        "200":
          description: Successfully retrieved environment list
          content:
            application/json:
              schema:
                type: object
                properties:
                  environments:
                    type: array
                    items:
                      $ref: "#/components/schemas/GatewayEnvironmentResponse"
        "400":
          description: Bad request - invalid parameters
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
        "401":
          description: Unauthorized - invalid or missing authentication
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
        "404":
          description: Resource not found
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
        "500":
          description: Internal server error
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"

  /orgs/{orgName}/gateways/{gatewayID}/environments/{envID}:
    parameters:
      - name: orgName
        in: path
        required: true
        description: Organization name/handle
        schema:
          type: string
          pattern: "^[a-z0-9-]+$"
          minLength: 1
          maxLength: 64
      - name: gatewayID
        in: path
        required: true
        description: Gateway UUID or name
        schema:
          type: string
      - name: envID
        in: path
        required: true
        description: Environment UUID or name
        schema:
          type: string

    post:
      tags:
        - Gateway-Environment Mappings
      summary: Assign gateway to environment
      description: |
        Create a mapping between a gateway and an environment.

        This makes the gateway available for use in the specified environment.
        A gateway can be mapped to multiple environments, and an environment can have
        multiple gateways.
      operationId: assignGatewayToEnvironment
      responses:
        "201":
          description: Mapping created successfully
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/GatewayResponse"
        "400":
          description: Bad request - invalid parameters
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
        "401":
          description: Unauthorized - invalid or missing authentication
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
        "404":
          description: Resource not found
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
        "409":
          description: Mapping already exists
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
        "500":
          description: Internal server error
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"

    delete:
      tags:
        - Gateway-Environment Mappings
      summary: Remove gateway from environment
      description: |
        Remove the mapping between a gateway and an environment.

        This makes the gateway unavailable in the specified environment.

        **Warning:** If agents in this environment are using this gateway, they may
        experience routing failures after this operation.
      operationId: removeGatewayFromEnvironment
      responses:
        "204":
          description: Mapping removed successfully
        "400":
          description: Bad request - invalid parameters
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
        "401":
          description: Unauthorized - invalid or missing authentication
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
        "404":
          description: Gateway, environment, or mapping not found
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
        "500":
          description: Internal server error
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"

  /orgs/{orgName}/gateways/{gatewayID}/health:
    parameters:
      - name: orgName
        in: path
        required: true
        description: Organization name/handle
        schema:
          type: string
          pattern: "^[a-z0-9-]+$"
          minLength: 1
          maxLength: 64
      - name: gatewayID
        in: path
        required: true
        description: Gateway UUID or name
        schema:
          type: string

    get:
      tags:
        - Health
      summary: Check gateway health
      description: |
        Perform a health check on the gateway by communicating with it via the configured adapter.

        This endpoint will:
        - Verify connectivity to the gateway
        - Check gateway operational status
        - Measure response time
        - Return detailed health information
      operationId: checkGatewayHealth
      responses:
        "200":
          description: Health check completed (status in response body)
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/HealthStatusResponse"
        "400":
          description: Bad request - invalid parameters
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
        "401":
          description: Unauthorized - invalid or missing authentication
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
        "404":
          description: Resource not found
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
        "500":
          description: Internal server error
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"

  /orgs/{orgName}/gateways/{gatewayID}/tokens:
    parameters:
      - name: orgName
        in: path
        required: true
        description: Organization name/handle
        schema:
          type: string
          pattern: "^[a-z0-9-]+$"
          minLength: 1
          maxLength: 64
      - name: gatewayID
        in: path
        required: true
        description: Gateway UUID or name
        schema:
          type: string

    post:
      tags:
        - Gateway Tokens
      summary: Rotate gateway token
      description: |
        Generate a new authentication token for the gateway and invalidate the old one.

        **Security Note:**
        - The new token is only returned once in this response
        - Store the token securely - it cannot be retrieved later
        - The old token will be immediately invalidated
        - Update your gateway configuration with the new token

        **Use Cases:**
        - Regular token rotation for security compliance
        - Token compromise recovery
        - Periodic security maintenance
      operationId: rotateGatewayToken
      responses:
        "200":
          description: Token rotated successfully
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/GatewayTokenResponse"
        "400":
          description: Bad request - invalid parameters
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
        "401":
          description: Unauthorized - invalid or missing authentication
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
        "404":
          description: Gateway not found
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
        "500":
          description: Internal server error
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"

  /orgs/{orgName}/gateways/{gatewayID}/tokens/{tokenID}:
    parameters:
      - name: orgName
        in: path
        required: true
        description: Organization name/handle
        schema:
          type: string
          pattern: "^[a-z0-9-]+$"
          minLength: 1
          maxLength: 64
      - name: gatewayID
        in: path
        required: true
        description: Gateway UUID or name
        schema:
          type: string
      - name: tokenID
        in: path
        required: true
        description: Token identifier to revoke
        schema:
          type: string

    delete:
      tags:
        - Gateway Tokens
      summary: Revoke gateway token
      description: |
        Revoke a specific gateway authentication token.

        **Security Note:**
        - The token will be immediately invalidated
        - Any gateway using this token will lose authentication
        - This action cannot be undone

        **Use Cases:**
        - Emergency token revocation after compromise
        - Decommissioning gateway instances
        - Security incident response
      operationId: revokeGatewayToken
      responses:
        "204":
          description: Token revoked successfully
        "400":
          description: Bad request - invalid parameters
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
        "401":
          description: Unauthorized - invalid or missing authentication
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
        "404":
          description: Gateway or token not found
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
        "500":
          description: Internal server error
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"

  /orgs/{orgName}/data-planes:
    get:
      summary: List all data planes in an organization
      description: Retrieves all data planes available in the specified organization
      operationId: listDataPlanes
      parameters:
        - name: orgName
          in: path
          description: Organization name
          required: true
          schema:
            type: string
      responses:
        "200":
          description: List of data planes
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/DataPlaneListResponse"
        "404":
          description: Organization not found
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
        "500":
          description: Internal server error
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
  /orgs/{orgName}/projects/{projName}/deployment-pipeline:
    get:
      summary: Get deployment pipeline for a project
      description: Retrieves the deployment pipeline configuration for the specified project within an organization
      operationId: getDeploymentPipeline
      parameters:
        - name: orgName
          in: path
          description: Organization name
          required: true
          schema:
            type: string
        - name: projName
          in: path
          description: Project name
          required: true
          schema:
            type: string
      responses:
        "200":
          description: Deployment pipeline details
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/DeploymentPipelineResponse"
        "404":
          description: Project not found
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
        "500":
          description: Internal server error
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"

  /orgs/{orgName}/projects/{projName}/agents/{agentName}/traces:
    get:
      summary: List traces for an agent
      description: |
        Retrieves a paginated list of traces for the specified agent with optional filtering.
        Note: If either startTime or endTime is provided, both must be provided together.
        Both timestamps must be in RFC3339 format (e.g., 2025-12-20T10:00:00Z).
      operationId: listTraces
      parameters:
        - name: orgName
          in: path
          description: Organization name
          required: true
          schema:
            type: string
        - name: projName
          in: path
          description: Project name
          required: true
          schema:
            type: string
        - name: agentName
          in: path
          description: Agent name
          required: true
          schema:
            type: string
        - name: environment
          in: query
          description: Environment name (e.g., Development, Production)
          required: true
          schema:
            type: string
          example: Development
        - name: limit
          in: query
          description: Maximum number of traces to return
          required: false
          schema:
            type: integer
            default: 10
            minimum: 1
            maximum: 100
        - name: offset
          in: query
          description: Number of traces to skip
          required: false
          schema:
            type: integer
            default: 0
            minimum: 0
        - name: startTime
          in: query
          description: |
            Filter traces starting from this time (RFC3339 format, e.g., 2025-12-20T10:00:00Z).
            Must be provided together with endTime.
          required: false
          schema:
            type: string
            format: date-time
          example: "2025-12-20T10:00:00Z"
        - name: endTime
          in: query
          description: |
            Filter traces up to this time (RFC3339 format, e.g., 2025-12-20T10:00:00Z).
            Must be provided together with startTime.
          required: false
          schema:
            type: string
            format: date-time
          example: "2025-12-20T18:00:00Z"
        - name: sortOrder
          in: query
          description: Sort order for traces
          required: false
          schema:
            type: string
            enum: [asc, desc]
            default: desc
      responses:
        "200":
          description: List of traces
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/TraceOverviewResponse"
        "400":
          description: Invalid request parameters
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
        "404":
          description: Agent not found
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
        "500":
          description: Internal server error
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"

  /orgs/{orgName}/projects/{projName}/agents/{agentName}/traces/export:
    get:
      summary: Export traces with full span details
      description: |
        Retrieves complete trace objects including all spans and their attributes for the specified agent.
        Designed for exporting trace data for analysis or archival. Returns full trace details with all spans.
        Note: If either startTime or endTime is provided, both must be provided together.
        Both timestamps must be in RFC3339 format (e.g., 2025-12-20T10:00:00Z).
      operationId: exportTraces
      parameters:
        - name: orgName
          in: path
          description: Organization name
          required: true
          schema:
            type: string
        - name: projName
          in: path
          description: Project name
          required: true
          schema:
            type: string
        - name: agentName
          in: path
          description: Agent name
          required: true
          schema:
            type: string
        - name: environment
          in: query
          description: Environment name (e.g., Development, Production)
          required: true
          schema:
            type: string
          example: Development
        - name: limit
          in: query
          description: Maximum number of traces to export (capped at 1000)
          required: false
          schema:
            type: integer
            default: 100
            minimum: 1
            maximum: 1000
        - name: offset
          in: query
          description: Number of traces to skip
          required: false
          schema:
            type: integer
            default: 0
            minimum: 0
        - name: startTime
          in: query
          description: |
            Filter traces starting from this time (RFC3339 format, e.g., 2025-12-20T10:00:00Z).
            Must be provided together with endTime.
          required: false
          schema:
            type: string
            format: date-time
          example: "2025-12-20T10:00:00Z"
        - name: endTime
          in: query
          description: |
            Filter traces up to this time (RFC3339 format, e.g., 2025-12-20T10:00:00Z).
            Must be provided together with startTime.
          required: false
          schema:
            type: string
            format: date-time
          example: "2025-12-20T18:00:00Z"
        - name: sortOrder
          in: query
          description: Sort order for traces
          required: false
          schema:
            type: string
            enum: [asc, desc]
            default: desc
      responses:
        "200":
          description: Complete trace data with all spans
          headers:
            Content-Disposition:
              description: Suggests a filename for the downloaded export
              schema:
                type: string
                example: "attachment; filename=traces-export-20260116-120000.json"
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/TraceExportResponse"
        "400":
          description: Invalid request parameters
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
        "404":
          description: Agent not found
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
        "500":
          description: Internal server error
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"

  /orgs/{orgName}/projects/{projName}/agents/{agentName}/trace/{traceId}:
    get:
      summary: Get trace details
      description: Retrieves detailed information about a specific trace including all spans
      operationId: getTrace
      parameters:
        - name: orgName
          in: path
          description: Organization name
          required: true
          schema:
            type: string
        - name: projName
          in: path
          description: Project name
          required: true
          schema:
            type: string
        - name: agentName
          in: path
          description: Agent name
          required: true
          schema:
            type: string
        - name: traceId
          in: path
          description: Trace ID
          required: true
          schema:
            type: string
        - name: environment
          in: query
          description: Environment name (e.g., Development, Production)
          required: true
          schema:
            type: string
          example: Development
      responses:
        "200":
          description: Trace details with all spans
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/TraceResponse"
        "400":
          description: Invalid request parameters
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
        "404":
          description: Trace not found
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
        "500":
          description: Internal server error
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"

  /orgs/{orgName}/projects/{projName}/agents/{agentName}/token:
    post:
      summary: Generate authentication token for an agent
      description: |
        Generates a signed JWT token for an external agent to authenticate API requests.
        The token includes claims for component, environment, organization, and project identifiers.
      operationId: generateAgentToken
      parameters:
        - name: orgName
          in: path
          required: true
          schema:
            type: string
          description: Organization name
        - name: projName
          in: path
          required: true
          schema:
            type: string
          description: Project name
        - name: agentName
          in: path
          required: true
          schema:
            type: string
          description: Agent name
        - name: environment
          in: query
          required: false
          schema:
            type: string
          description: Environment name (defaults to configured default if not provided)
      requestBody:
        required: false
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/TokenRequest"
      responses:
        "200":
          description: Token generated successfully
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/TokenResponse"
        "400":
          description: Invalid request (e.g., invalid expiry duration)
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
        "404":
          description: Agent, project, or organization not found
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
        "401":
          description: Unauthorized
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"

  /auth/external/jwks.json:
    servers:
      - url: /
        description: Served from root path (not /api/v1)
    get:
      summary: Get JSON Web Key Set (JWKS)
      description: |
        Returns the public keys used to verify JWT signatures.
        This endpoint is public and does not require authentication.
        Clients can use these keys to verify tokens issued by the service.
      operationId: getJWKS
      responses:
        "200":
          description: JWKS retrieved successfully
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/JWKS"
        "500":
          description: Failed to retrieve JWKS
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"

  # ============================================
  # CATALOG ENDPOINTS
  # ============================================

  /orgs/{orgName}/catalog:
    parameters:
      - name: orgName
        in: path
        required: true
        description: Organization name/handle
        schema:
          type: string
          pattern: "^[a-z0-9-]+$"
          minLength: 1
          maxLength: 64

    get:
      tags:
        - Catalog
      summary: List catalog resources
      description: |
        Retrieve a paginated list of resources available in the organization's catalog.

        **Resource Types:**
        - LlmProvider: LLM providers marked as available in catalog (in_catalog = TRUE)
        - agent: Agents from OpenChoreo (all agents are in catalog)
        - mcp: MCP resources from OpenChoreo (all MCPs are in catalog)

        If kind is not specified, returns all resources in catalog.
      operationId: listCatalogResources
      parameters:
        - name: kind
          in: query
          description: Filter by resource type
          required: false
          schema:
            type: string
            enum:
              - LlmProvider
              - agent
              - mcp
        - name: environmentId
          in: query
          description: Filter by environment UUID (only applicable for LlmProvider kind)
          required: false
          schema:
            type: string
            format: uuid
            example: "550e8400-e29b-41d4-a716-446655440000"
        - name: limit
          in: query
          description: Maximum number of results to return
          required: false
          schema:
            type: integer
            format: int32
            minimum: 1
            maximum: 100
            default: 20
        - name: offset
          in: query
          description: Number of results to skip
          required: false
          schema:
            type: integer
            format: int32
            minimum: 0
            default: 0
      responses:
        "200":
          description: Successfully retrieved catalog list
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/CatalogListResponse"
        "400":
          description: Bad request - invalid parameters
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
        "401":
          description: Unauthorized - invalid or missing authentication
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
        "404":
          description: Organization not found
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
        "500":
          description: Internal server error
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"

  /repositories/branches:
    post:
      summary: List branches for a repository
      description: |
        Returns a list of branches for the specified public repository.
        Currently supports GitHub repositories only.
      operationId: listRepositoryBranches
      parameters:
        - name: limit
          in: query
          description: Maximum number of results to return (default 30, max 100)
          required: false
          schema:
            type: integer
            default: 30
            minimum: 1
            maximum: 100
        - name: offset
          in: query
          description: Number of results to skip for pagination (default 0)
          required: false
          schema:
            type: integer
            default: 0
            minimum: 0
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/ListBranchesRequest"
      responses:
        "200":
          description: List of branches
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ListBranchesResponse"
        "400":
          description: Invalid request parameters
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
        "404":
          description: Repository not found
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
        "429":
          description: Rate limit exceeded
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
        "500":
          description: Internal server error
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"

  /repositories/commits:
    post:
      summary: List commits for a repository
      description: |
        Returns a list of commits for the specified public repository.
        Currently supports GitHub repositories only.
      operationId: listRepositoryCommits
      parameters:
        - name: limit
          in: query
          description: Maximum number of results to return (default 30, max 100)
          required: false
          schema:
            type: integer
            default: 30
            minimum: 1
            maximum: 100
        - name: offset
          in: query
          description: Number of results to skip for pagination (default 0)
          required: false
          schema:
            type: integer
            default: 0
            minimum: 0
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/ListCommitsRequest"
      responses:
        "200":
          description: List of commits
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ListCommitsResponse"
        "400":
          description: Invalid request parameters
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
        "404":
          description: Repository not found
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
        "429":
          description: Rate limit exceeded
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
        "500":
          description: Internal server error
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"

  # ============================================
  # LLM PROVIDER AND PROXY MANAGEMENT ENDPOINTS
  # ============================================

  /orgs/{orgName}/llm-provider-templates:
    parameters:
      - name: orgName
        in: path
        required: true
        description: Organization name/handle
        schema:
          type: string

    post:
      tags:
        - LLM Provider Templates
      summary: Create a new LLM provider template
      description: Create a new LLM provider template for the organization
      operationId: createLLMProviderTemplate
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/CreateLLMProviderTemplateRequest"
      responses:
        "201":
          description: Template created successfully
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/LLMProviderTemplateResponse"
        "400":
          description: Invalid request
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
        "401":
          description: Unauthorized
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
        "409":
          description: Template already exists
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
        "500":
          description: Internal server error
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"

    get:
      tags:
        - LLM Provider Templates
      summary: List all LLM provider templates
      description: Retrieve a paginated list of LLM provider templates
      operationId: listLLMProviderTemplates
      parameters:
        - name: limit
          in: query
          description: Maximum number of results to return
          schema:
            type: integer
            format: int32
            minimum: 1
            maximum: 100
            default: 20
        - name: offset
          in: query
          description: Number of results to skip
          schema:
            type: integer
            format: int32
            minimum: 0
            default: 0
      responses:
        "200":
          description: Successfully retrieved template list
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/LLMProviderTemplateListResponse"
        "400":
          description: Invalid request parameters
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
        "401":
          description: Unauthorized
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
        "500":
          description: Internal server error
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"

  /orgs/{orgName}/llm-provider-templates/{id}:
    parameters:
      - name: orgName
        in: path
        required: true
        description: Organization name/handle
        schema:
          type: string
      - name: id
        in: path
        required: true
        description: Template UUID
        schema:
          type: string

    get:
      tags:
        - LLM Provider Templates
      summary: Get LLM provider template details
      description: Retrieve detailed information about a specific template
      operationId: getLLMProviderTemplate
      responses:
        "200":
          description: Successfully retrieved template
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/LLMProviderTemplateResponse"
        "400":
          description: Invalid template ID
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
        "401":
          description: Unauthorized
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
        "404":
          description: Template not found
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
        "500":
          description: Internal server error
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"

    put:
      tags:
        - LLM Provider Templates
      summary: Update LLM provider template
      description: Update an existing LLM provider template
      operationId: updateLLMProviderTemplate
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/UpdateLLMProviderTemplateRequest"
      responses:
        "200":
          description: Template updated successfully
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/LLMProviderTemplateResponse"
        "400":
          description: Invalid request
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
        "401":
          description: Unauthorized
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
        "404":
          description: Template not found
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
        "500":
          description: Internal server error
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"

    delete:
      tags:
        - LLM Provider Templates
      summary: Delete LLM provider template
      description: Delete an LLM provider template
      operationId: deleteLLMProviderTemplate
      responses:
        "204":
          description: Template deleted successfully
        "400":
          description: Invalid template ID
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
        "401":
          description: Unauthorized
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
        "404":
          description: Template not found
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
        "500":
          description: Internal server error
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"

  # ============================================
  # LLM PROVIDER ENDPOINTS
  # ============================================

  /orgs/{orgName}/llm-providers:
    parameters:
      - name: orgName
        in: path
        required: true
        description: Organization name/handle
        schema:
          type: string

    post:
      tags:
        - LLM Providers
      summary: Create a new LLM provider
      description: Create a new LLM provider instance from a template
      operationId: createLLMProvider
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/CreateLLMProviderRequest"
      responses:
        "201":
          description: Provider created successfully
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/LLMProviderResponse"
        "400":
          description: Invalid request
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
        "401":
          description: Unauthorized
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
        "409":
          description: Provider already exists
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
        "500":
          description: Internal server error
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"

    get:
      tags:
        - LLM Providers
      summary: List all LLM providers
      description: Retrieve a paginated list of LLM providers
      operationId: listLLMProviders
      parameters:
        - name: limit
          in: query
          description: Maximum number of results to return
          schema:
            type: integer
            format: int32
            minimum: 1
            maximum: 100
            default: 20
        - name: offset
          in: query
          description: Number of results to skip
          schema:
            type: integer
            format: int32
            minimum: 0
            default: 0
      responses:
        "200":
          description: Successfully retrieved provider list
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/LLMProviderListResponse"
        "400":
          description: Invalid request parameters
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
        "401":
          description: Unauthorized
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
        "500":
          description: Internal server error
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"

  /orgs/{orgName}/llm-providers/{id}:
    parameters:
      - name: orgName
        in: path
        required: true
        description: Organization name/handle
        schema:
          type: string
      - name: id
        in: path
        required: true
        description: Provider UUID
        schema:
          type: string

    get:
      tags:
        - LLM Providers
      summary: Get LLM provider details
      description: Retrieve detailed information about a specific provider
      operationId: getLLMProvider
      responses:
        "200":
          description: Successfully retrieved provider
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/LLMProviderResponse"
        "400":
          description: Invalid provider ID
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
        "401":
          description: Unauthorized
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
        "404":
          description: Provider not found
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
        "500":
          description: Internal server error
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"

    put:
      tags:
        - LLM Providers
      summary: Update LLM provider
      description: Update an existing LLM provider
      operationId: updateLLMProvider
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/UpdateLLMProviderRequest"
      responses:
        "200":
          description: Provider updated successfully
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/LLMProviderResponse"
        "400":
          description: Invalid request
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
        "401":
          description: Unauthorized
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
        "404":
          description: Provider not found
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
        "500":
          description: Internal server error
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"

    delete:
      tags:
        - LLM Providers
      summary: Delete LLM provider
      description: Delete an LLM provider
      operationId: deleteLLMProvider
      responses:
        "204":
          description: Provider deleted successfully
        "400":
          description: Invalid provider ID
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
        "401":
          description: Unauthorized
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
        "404":
          description: Provider not found
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
        "500":
          description: Internal server error
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"

  /orgs/{orgName}/llm-providers/{id}/catalog:
    parameters:
      - name: orgName
        in: path
        required: true
        description: Organization name/handle
        schema:
          type: string
      - name: id
        in: path
        required: true
        description: Provider UUID
        schema:
          type: string

    put:
      tags:
        - LLM Providers
      summary: Update LLM provider catalog status
      description: |
        Add or remove an LLM provider from the catalog.

        When `inCatalog` is true, the provider becomes discoverable in the catalog
        and can be used by developers for agent model configurations.

        When `inCatalog` is false, the provider is removed from the catalog
        and will not appear in catalog queries.
      operationId: updateLLMProviderCatalogStatus
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/UpdateLLMProviderCatalogRequest"
      responses:
        "200":
          description: Catalog status updated successfully
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/LLMProviderResponse"
        "400":
          description: Invalid request
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
        "401":
          description: Unauthorized
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
        "404":
          description: Provider not found
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
        "500":
          description: Internal server error
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"

  /orgs/{orgName}/llm-providers/{id}/llm-proxies:
    parameters:
      - name: orgName
        in: path
        required: true
        description: Organization name/handle
        schema:
          type: string
      - name: id
        in: path
        required: true
        description: Provider UUID
        schema:
          type: string

    get:
      tags:
        - LLM Providers
      summary: List LLM proxies by provider
      description: Retrieve all proxies associated with a specific provider
      operationId: listLLMProxiesByProvider
      parameters:
        - name: limit
          in: query
          description: Maximum number of results to return
          schema:
            type: integer
            format: int32
            minimum: 1
            maximum: 100
            default: 20
        - name: offset
          in: query
          description: Number of results to skip
          schema:
            type: integer
            format: int32
            minimum: 0
            default: 0
      responses:
        "200":
          description: Successfully retrieved proxy list
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/LLMProxyListResponse"
        "400":
          description: Invalid request parameters
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
        "401":
          description: Unauthorized
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
        "404":
          description: Provider not found
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
        "500":
          description: Internal server error
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"

  # ============================================
  # LLM PROXY ENDPOINTS
  # ============================================

  /orgs/{orgName}/projects/{projName}/llm-proxies:
    parameters:
      - name: orgName
        in: path
        required: true
        description: Organization name/handle
        schema:
          type: string
      - name: projName
        in: path
        required: true
        description: Project name
        schema:
          type: string

    post:
      tags:
        - LLM Proxies
      summary: Create a new LLM proxy
      description: Create a new LLM proxy for a project
      operationId: createLLMProxy
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/CreateLLMProxyRequest"
      responses:
        "201":
          description: Proxy created successfully
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/LLMProxyResponse"
        "400":
          description: Invalid request
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
        "401":
          description: Unauthorized
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
        "404":
          description: Project not found
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
        "409":
          description: Proxy already exists
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
        "500":
          description: Internal server error
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"

    get:
      tags:
        - LLM Proxies
      summary: List all LLM proxies in a project
      description: Retrieve a paginated list of LLM proxies for a project
      operationId: listLLMProxies
      parameters:
        - name: limit
          in: query
          description: Maximum number of results to return
          schema:
            type: integer
            format: int32
            minimum: 1
            maximum: 100
            default: 20
        - name: offset
          in: query
          description: Number of results to skip
          schema:
            type: integer
            format: int32
            minimum: 0
            default: 0
      responses:
        "200":
          description: Successfully retrieved proxy list
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/LLMProxyListResponse"
        "400":
          description: Invalid request parameters
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
        "401":
          description: Unauthorized
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
        "404":
          description: Project not found
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
        "500":
          description: Internal server error
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"

  /orgs/{orgName}/projects/{projName}/llm-proxies/{id}:
    parameters:
      - name: orgName
        in: path
        required: true
        description: Organization name/handle
        schema:
          type: string
      - name: projName
        in: path
        required: true
        description: Project name
        schema:
          type: string
      - name: id
        in: path
        required: true
        description: Proxy UUID
        schema:
          type: string

    get:
      tags:
        - LLM Proxies
      summary: Get LLM proxy details
      description: Retrieve detailed information about a specific proxy
      operationId: getLLMProxy
      responses:
        "200":
          description: Successfully retrieved proxy
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/LLMProxyResponse"
        "400":
          description: Invalid proxy ID
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
        "401":
          description: Unauthorized
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
        "404":
          description: Proxy not found
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
        "500":
          description: Internal server error
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"

    put:
      tags:
        - LLM Proxies
      summary: Update LLM proxy
      description: Update an existing LLM proxy
      operationId: updateLLMProxy
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/UpdateLLMProxyRequest"
      responses:
        "200":
          description: Proxy updated successfully
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/LLMProxyResponse"
        "400":
          description: Invalid request
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
        "401":
          description: Unauthorized
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
        "404":
          description: Proxy not found
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
        "500":
          description: Internal server error
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"

    delete:
      tags:
        - LLM Proxies
      summary: Delete LLM proxy
      description: Delete an LLM proxy
      operationId: deleteLLMProxy
      responses:
        "204":
          description: Proxy deleted successfully
        "400":
          description: Invalid proxy ID
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
        "401":
          description: Unauthorized
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
        "404":
          description: Proxy not found
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
        "500":
          description: Internal server error
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"

  # ============================================
  # LLM DEPLOYMENT ENDPOINTS
  # ============================================

  /orgs/{orgName}/llm-providers/{id}/deployments:
    parameters:
      - name: orgName
        in: path
        required: true
        description: Organization name/handle
        schema:
          type: string
      - name: id
        in: path
        required: true
        description: Provider UUID
        schema:
          type: string

    post:
      tags:
        - LLM Deployments
      summary: Deploy an LLM provider
      description: Deploy an LLM provider to a gateway
      operationId: deployLLMProvider
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/DeployAgentRequest"
      responses:
        "201":
          description: Provider deployed successfully
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/DeploymentResponse"
        "400":
          description: Invalid request
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
        "401":
          description: Unauthorized
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
        "404":
          description: Provider or gateway not found
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
        "500":
          description: Internal server error
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"

    get:
      tags:
        - LLM Deployments
      summary: Get LLM provider deployments
      description: Retrieve all deployments for an LLM provider
      operationId: getLLMProviderDeployments
      parameters:
        - name: gatewayId
          in: query
          description: Filter by gateway ID
          schema:
            type: string
        - name: status
          in: query
          description: Filter by deployment status
          schema:
            type: string
            enum:
              - DEPLOYED
              - UNDEPLOYED
              - FAILED
      responses:
        "200":
          description: Successfully retrieved deployments
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: "#/components/schemas/DeploymentResponse"
        "400":
          description: Invalid request parameters
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
        "401":
          description: Unauthorized
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
        "404":
          description: Provider not found
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
        "500":
          description: Internal server error
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"

  /orgs/{orgName}/llm-providers/{id}/deployments/undeploy:
    parameters:
      - name: orgName
        in: path
        required: true
        description: Organization name/handle
        schema:
          type: string
      - name: id
        in: path
        required: true
        description: Provider UUID
        schema:
          type: string

    post:
      tags:
        - LLM Deployments
      summary: Undeploy an LLM provider deployment
      description: Undeploy a specific deployment of an LLM provider
      operationId: undeployLLMProviderDeployment
      parameters:
        - name: deploymentId
          in: query
          required: true
          description: Deployment UUID to undeploy
          schema:
            type: string
        - name: gatewayId
          in: query
          required: true
          description: Gateway UUID
          schema:
            type: string
      responses:
        "200":
          description: Provider undeployed successfully
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                    example: LLM provider undeployed successfully
        "400":
          description: Invalid request
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
        "401":
          description: Unauthorized
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
        "404":
          description: Provider, deployment, or gateway not found
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
        "409":
          description: No active deployment found
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
        "500":
          description: Internal server error
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"

  /orgs/{orgName}/llm-providers/{id}/deployments/restore:
    parameters:
      - name: orgName
        in: path
        required: true
        description: Organization name/handle
        schema:
          type: string
      - name: id
        in: path
        required: true
        description: Provider UUID
        schema:
          type: string

    post:
      tags:
        - LLM Deployments
      summary: Restore an LLM provider deployment
      description: Restore a previously undeployed deployment
      operationId: restoreLLMProviderDeployment
      parameters:
        - name: deploymentId
          in: query
          required: true
          description: Deployment UUID to restore
          schema:
            type: string
        - name: gatewayId
          in: query
          required: true
          description: Gateway UUID
          schema:
            type: string
      responses:
        "200":
          description: Deployment restored successfully
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/DeploymentResponse"
        "400":
          description: Invalid request
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
        "401":
          description: Unauthorized
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
        "404":
          description: Provider, deployment, or gateway not found
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
        "409":
          description: Deployment already active
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
        "500":
          description: Internal server error
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"

  /orgs/{orgName}/llm-providers/{id}/deployments/{deploymentId}:
    parameters:
      - name: orgName
        in: path
        required: true
        description: Organization name/handle
        schema:
          type: string
      - name: id
        in: path
        required: true
        description: Provider UUID
        schema:
          type: string
      - name: deploymentId
        in: path
        required: true
        description: Deployment UUID
        schema:
          type: string

    get:
      tags:
        - LLM Deployments
      summary: Get LLM provider deployment details
      description: Retrieve detailed information about a specific deployment
      operationId: getLLMProviderDeployment
      responses:
        "200":
          description: Successfully retrieved deployment
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/DeploymentResponse"
        "400":
          description: Invalid deployment ID
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
        "401":
          description: Unauthorized
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
        "404":
          description: Deployment not found
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
        "500":
          description: Internal server error
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"

    delete:
      tags:
        - LLM Deployments
      summary: Delete LLM provider deployment
      description: Delete a deployment (must be undeployed first)
      operationId: deleteLLMProviderDeployment
      responses:
        "204":
          description: Deployment deleted successfully
        "400":
          description: Invalid deployment ID
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
        "401":
          description: Unauthorized
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
        "404":
          description: Deployment not found
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
        "409":
          description: Cannot delete an active deployment
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
        "500":
          description: Internal server error
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"

  /orgs/{orgName}/projects/{projName}/agents/{agentName}/monitors:
    get:
      summary: List all evaluation monitors for an agent
      description: Returns a list of all evaluation monitors for a specific agent
      operationId: listMonitors
      parameters:
        - name: orgName
          in: path
          required: true
          schema:
            type: string
          description: Organization name
        - name: projName
          in: path
          required: true
          schema:
            type: string
          description: Project name
        - name: agentName
          in: path
          required: true
          schema:
            type: string
          description: Agent name
      responses:
        "200":
          description: List of monitors
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/MonitorListResponse"
        "400":
          description: Invalid request parameters
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
        "500":
          description: Internal server error
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
    post:
      summary: Create a new evaluation monitor
      description: |
        Creates a new evaluation monitor for continuous or one-time evaluation of agent traces.
        Supports two types: 'future' for continuous monitoring and 'past' for one-time historical analysis.
      operationId: createMonitor
      parameters:
        - name: orgName
          in: path
          required: true
          schema:
            type: string
          description: Organization name
        - name: projName
          in: path
          required: true
          schema:
            type: string
          description: Project name
        - name: agentName
          in: path
          required: true
          schema:
            type: string
          description: Agent name
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/CreateMonitorRequest"
      responses:
        "201":
          description: Monitor created successfully
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/MonitorResponse"
        "400":
          description: Invalid request
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
        "409":
          description: Monitor with same name already exists
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
        "500":
          description: Internal server error
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"

  /orgs/{orgName}/projects/{projName}/agents/{agentName}/monitors/{monitorName}:
    get:
      summary: Get monitor details
      description: Retrieves detailed information about a specific evaluation monitor
      operationId: getMonitor
      parameters:
        - name: orgName
          in: path
          required: true
          schema:
            type: string
          description: Organization name
        - name: projName
          in: path
          required: true
          schema:
            type: string
          description: Project name
        - name: agentName
          in: path
          required: true
          schema:
            type: string
          description: Agent name
        - name: monitorName
          in: path
          required: true
          schema:
            type: string
          description: Monitor name
      responses:
        "200":
          description: Monitor details
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/MonitorResponse"
        "404":
          description: Monitor not found
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
        "500":
          description: Internal server error
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
    patch:
      summary: Update monitor configuration
      description: Updates the configuration of an existing evaluation monitor
      operationId: updateMonitor
      parameters:
        - name: orgName
          in: path
          required: true
          schema:
            type: string
          description: Organization name
        - name: projName
          in: path
          required: true
          schema:
            type: string
          description: Project name
        - name: agentName
          in: path
          required: true
          schema:
            type: string
          description: Agent name
        - name: monitorName
          in: path
          required: true
          schema:
            type: string
          description: Monitor name
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/UpdateMonitorRequest"
      responses:
        "200":
          description: Monitor updated successfully
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/MonitorResponse"
        "400":
          description: Invalid request
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
        "404":
          description: Monitor not found
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
        "500":
          description: Internal server error
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
    delete:
      summary: Delete a monitor
      description: Deletes an evaluation monitor and all associated runs
      operationId: deleteMonitor
      parameters:
        - name: orgName
          in: path
          required: true
          schema:
            type: string
          description: Organization name
        - name: projName
          in: path
          required: true
          schema:
            type: string
          description: Project name
        - name: agentName
          in: path
          required: true
          schema:
            type: string
          description: Agent name
        - name: monitorName
          in: path
          required: true
          schema:
            type: string
          description: Monitor name
      responses:
        "204":
          description: Monitor deleted successfully
        "404":
          description: Monitor not found
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
        "500":
          description: Internal server error
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"

  /orgs/{orgName}/projects/{projName}/agents/{agentName}/monitors/{monitorName}/stop:
    post:
      summary: Stop a monitor
      description: Stops a future monitor by unscheduling it. The monitor will no longer execute on schedule but can be started again later.
      operationId: stopMonitor
      parameters:
        - name: orgName
          in: path
          required: true
          schema:
            type: string
          description: Organization name
        - name: projName
          in: path
          required: true
          schema:
            type: string
          description: Project name
        - name: agentName
          in: path
          required: true
          schema:
            type: string
          description: Agent name
        - name: monitorName
          in: path
          required: true
          schema:
            type: string
          description: Monitor name
      responses:
        "200":
          description: Monitor stopped successfully
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/MonitorResponse"
        "400":
          description: Invalid request (e.g., trying to stop a past monitor)
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
        "404":
          description: Monitor not found
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
        "409":
          description: Monitor already stopped
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
        "500":
          description: Internal server error
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"

  /orgs/{orgName}/projects/{projName}/agents/{agentName}/monitors/{monitorName}/start:
    post:
      summary: Start a monitor
      description: Starts a stopped future monitor by scheduling it to run immediately. The scheduler will pick it up within 60 seconds.
      operationId: startMonitor
      parameters:
        - name: orgName
          in: path
          required: true
          schema:
            type: string
          description: Organization name
        - name: projName
          in: path
          required: true
          schema:
            type: string
          description: Project name
        - name: agentName
          in: path
          required: true
          schema:
            type: string
          description: Agent name
        - name: monitorName
          in: path
          required: true
          schema:
            type: string
          description: Monitor name
      responses:
        "200":
          description: Monitor started successfully
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/MonitorResponse"
        "400":
          description: Invalid request (e.g., trying to start a past monitor)
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
        "404":
          description: Monitor not found
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
        "409":
          description: Monitor already active
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
        "500":
          description: Internal server error
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"

  /orgs/{orgName}/projects/{projName}/agents/{agentName}/monitors/{monitorName}/runs:
    get:
      summary: List monitor runs
      description: Returns a list of all execution runs for a specific monitor
      operationId: listMonitorRuns
      parameters:
        - name: orgName
          in: path
          required: true
          schema:
            type: string
          description: Organization name
        - name: projName
          in: path
          required: true
          schema:
            type: string
          description: Project name
        - name: agentName
          in: path
          required: true
          schema:
            type: string
          description: Agent name
        - name: monitorName
          in: path
          required: true
          schema:
            type: string
          description: Monitor name
      responses:
        "200":
          description: List of monitor runs
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/MonitorRunListResponse"
        "404":
          description: Monitor not found
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
        "500":
          description: Internal server error
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"

  /orgs/{orgName}/projects/{projName}/agents/{agentName}/monitors/{monitorName}/runs/{runId}/rerun:
    post:
      summary: Rerun a monitor with same parameters
      description: Creates a new workflow execution with the same time parameters as an existing run
      operationId: rerunMonitor
      parameters:
        - name: orgName
          in: path
          required: true
          schema:
            type: string
          description: Organization name
        - name: projName
          in: path
          required: true
          schema:
            type: string
          description: Project name
        - name: agentName
          in: path
          required: true
          schema:
            type: string
          description: Agent name
        - name: monitorName
          in: path
          required: true
          schema:
            type: string
          description: Monitor name
        - name: runId
          in: path
          required: true
          schema:
            type: string
          description: Run ID to rerun
      responses:
        "201":
          description: New run created successfully
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/MonitorRunResponse"
        "400":
          description: Invalid request
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
        "404":
          description: Monitor or run not found
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
        "500":
          description: Internal server error
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"

  /orgs/{orgName}/projects/{projName}/agents/{agentName}/monitors/{monitorName}/runs/{runId}/logs:
    get:
      summary: Get monitor run logs
      description: Retrieves execution logs for a specific monitor run
      operationId: getMonitorRunLogs
      parameters:
        - name: orgName
          in: path
          required: true
          schema:
            type: string
          description: Organization name
        - name: projName
          in: path
          required: true
          schema:
            type: string
          description: Project name
        - name: agentName
          in: path
          required: true
          schema:
            type: string
          description: Agent name
        - name: monitorName
          in: path
          required: true
          schema:
            type: string
          description: Monitor name
        - name: runId
          in: path
          required: true
          schema:
            type: string
          description: Run ID
      responses:
        "200":
          description: Monitor run logs
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/LogsResponse"
        "404":
          description: Monitor or run not found
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
        "500":
          description: Internal server error
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"

  /orgs/{orgName}/projects/{projName}/agents/{agentName}/monitors/{monitorName}/scores:
    get:
      summary: Get evaluation scores for a monitor within a time range
      description: Returns aggregated and individual evaluation scores for a monitor within a specified time window
      operationId: getMonitorScores
      parameters:
        - name: orgName
          in: path
          required: true
          schema:
            type: string
        - name: projName
          in: path
          required: true
          schema:
            type: string
        - name: agentName
          in: path
          required: true
          schema:
            type: string
        - name: monitorName
          in: path
          required: true
          schema:
            type: string
        - name: startTime
          in: query
          required: true
          schema:
            type: string
            format: date-time
          description: Start time for the query window (RFC3339 format)
        - name: endTime
          in: query
          required: true
          schema:
            type: string
            format: date-time
          description: End time for the query window (RFC3339 format)
        - name: evaluator
          in: query
          required: false
          schema:
            type: string
          description: Filter by evaluator displayName (unique within this monitor). This is the user-visible name defined on the monitor, not the catalog identifier.
        - name: level
          in: query
          required: false
          schema:
            type: string
            enum: [trace, agent, span]
          description: Filter by evaluation level
      responses:
        "200":
          description: Evaluation scores
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/MonitorScoresResponse"
        "400":
          description: Invalid request parameters
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
        "404":
          description: Monitor not found
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"

  /orgs/{orgName}/projects/{projName}/agents/{agentName}/monitors/{monitorName}/scores/timeseries:
    get:
      summary: Get time-series evaluation scores
      description: Returns time-bucketed evaluation scores for a specific evaluator
      operationId: getMonitorScoresTimeSeries
      parameters:
        - name: orgName
          in: path
          required: true
          schema:
            type: string
        - name: projName
          in: path
          required: true
          schema:
            type: string
        - name: agentName
          in: path
          required: true
          schema:
            type: string
        - name: monitorName
          in: path
          required: true
          schema:
            type: string
        - name: startTime
          in: query
          required: true
          schema:
            type: string
            format: date-time
          description: Start time for the query window (RFC3339 format)
        - name: endTime
          in: query
          required: true
          schema:
            type: string
            format: date-time
          description: End time for the query window (RFC3339 format)
        - name: evaluator
          in: query
          required: true
          schema:
            type: string
          description: Filter by evaluator displayName (unique within this monitor). This is the user-visible name defined on the monitor, not the catalog identifier.
        - name: granularity
          in: query
          required: false
          schema:
            type: string
            enum: [hour, day, week]
            default: hour
          description: Time bucket granularity
      responses:
        "200":
          description: Time-series data
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/TimeSeriesResponse"
        "400":
          description: Invalid request parameters
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
        "404":
          description: Monitor not found
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"

  /orgs/{orgName}/projects/{projName}/agents/{agentName}/traces/{traceId}/scores:
    get:
      summary: Get evaluation scores for a trace across all monitors
      description: Returns all evaluation scores for a specific trace across all monitors in the agent
      operationId: getTraceScores
      parameters:
        - name: orgName
          in: path
          required: true
          schema:
            type: string
        - name: projName
          in: path
          required: true
          schema:
            type: string
        - name: agentName
          in: path
          required: true
          schema:
            type: string
        - name: traceId
          in: path
          required: true
          schema:
            type: string
      responses:
        "200":
          description: Trace evaluation scores grouped by monitor
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/TraceScoresResponse"
        "400":
          description: Invalid request parameters
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
        "404":
          description: Trace not found
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"

  /orgs/{orgName}/evaluators:
    get:
      summary: List all evaluators
      description: Returns a list of all available evaluators for an organization
      operationId: listEvaluators
      parameters:
        - name: orgName
          in: path
          required: true
          schema:
            type: string
          description: Organization name
      responses:
        "200":
          description: List of evaluators
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/EvaluatorListResponse"
        "500":
          description: Internal server error
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"

  /orgs/{orgName}/evaluators/{evaluatorId}:
    get:
      summary: Get evaluator details
      description: Retrieves detailed information about a specific evaluator
      operationId: getEvaluator
      parameters:
        - name: orgName
          in: path
          required: true
          schema:
            type: string
          description: Organization name
        - name: evaluatorId
          in: path
          required: true
          schema:
            type: string
          description: Evaluator ID
      responses:
        "200":
          description: Evaluator details
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/EvaluatorResponse"
        "404":
          description: Evaluator not found
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
        "500":
          description: Internal server error
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"

components:
  schemas:
    CreateOrganizationRequest:
      type: object
      required:
        - name
      properties:
        name:
          type: string
          description: Name of the organization

    CreateProjectRequest:
      type: object
      required:
        - name
        - deploymentPipeline
        - displayName
      properties:
        name:
          type: string
          description: Name of the project
        displayName:
          type: string
          description: Display name of the project
        description:
          type: string
          description: Description of the project
        deploymentPipeline:
          type: string

    Provisioning:
      type: object
      required:
        - type
      properties:
        type:
          type: string
          enum: [internal]
          description: Type of provisioning
        repository:
          $ref: "#/components/schemas/RepositoryConfig"

    AgentType:
      type: object
      required:
        - type
      properties:
        type:
          type: string
          description: Type of the agent
        subType:
          type: string
          description: Sub-type of the agent

    BuildpackConfig:
      type: object
      required:
        - language
      properties:
        language:
          type: string
          description: Programming language for the buildpack
        languageVersion:
          type: string
          description: Version of the language runtime (optional, not needed for languages like Ballerina)
        runCommand:
          type: string
          description: Command to run the application (optional, not needed for languages like Ballerina)

    DockerConfig:
      type: object
      required:
        - dockerfilePath
      properties:
        dockerfilePath:
          type: string
          description: Path to the Dockerfile relative to the repository root

    BuildpackBuild:
      type: object
      required:
        - type
        - buildpack
      properties:
        type:
          type: string
          enum: [buildpack]
          description: Build method for the component
        buildpack:
          $ref: "#/components/schemas/BuildpackConfig"

    DockerBuild:
      type: object
      required:
        - type
        - docker
      properties:
        type:
          type: string
          enum: [docker]
          description: Build method for the component
        docker:
          $ref: "#/components/schemas/DockerConfig"

    Build:
      oneOf:
        - $ref: "#/components/schemas/BuildpackBuild"
        - $ref: "#/components/schemas/DockerBuild"
      discriminator:
        propertyName: type
        mapping:
          buildpack: "#/components/schemas/BuildpackBuild"
          docker: "#/components/schemas/DockerBuild"

    CreateAgentRequest:
      type: object
      required:
        - name
        - displayName
        - provisioning
        - agentType
      properties:
        name:
          type: string
          description: Unique name of the agent
        displayName:
          type: string
          description: Display name of the agent
        provisioning:
          $ref: "#/components/schemas/Provisioning"
        description:
          type: string
          description: Description of the agent
        agentType:
          $ref: "#/components/schemas/AgentType"
        build:
          $ref: "#/components/schemas/Build"
        configurations:
          $ref: "#/components/schemas/Configurations"
        inputInterface:
          $ref: "#/components/schemas/InputInterface"

    UpdateAgentBasicInfoRequest:
      type: object
      required:
        - displayName
        - description
      properties:
        displayName:
          type: string
          description: Display name of the agent
        description:
          type: string
          description: Description of the agent

    UpdateAgentBuildParametersRequest:
      type: object
      required:
        - provisioning
        - agentType
        - build
        - inputInterface
      properties:
        provisioning:
          $ref: "#/components/schemas/Provisioning"
        agentType:
          $ref: "#/components/schemas/AgentType"
        build:
          $ref: "#/components/schemas/Build"
        inputInterface:
          $ref: "#/components/schemas/InputInterface"

    UpdateAgentResourceConfigsRequest:
      type: object
      required:
        - replicas
        - resources
      properties:
        replicas:
          type: integer
          format: int32
          description: Number of replicas to run
          minimum: 0
          maximum: 10
        resources:
          $ref: "#/components/schemas/ResourceConfig"

    ResourceConfig:
      type: object
      properties:
        requests:
          $ref: "#/components/schemas/ResourceRequests"
        limits:
          $ref: "#/components/schemas/ResourceLimits"

    ResourceRequests:
      type: object
      properties:
        cpu:
          type: string
          description: CPU request (e.g., "100m", "0.5", "1.5")
          pattern: '^[0-9]+(\.[0-9]+)?m?$'
        memory:
          type: string
          description: Memory request (e.g., "256Mi", "1Gi", "512Ki", "2Ti")
          pattern: '^[0-9]+(\.[0-9]+)?(Ki|Mi|Gi|Ti|Pi|Ei)$'

    ResourceLimits:
      type: object
      properties:
        cpu:
          type: string
          description: CPU limit (e.g., "500m", "2", "1.5")
          pattern: '^[0-9]+(\.[0-9]+)?m?$'
        memory:
          type: string
          description: Memory limit (e.g., "512Mi", "2Gi", "1Ti", "256Ki")
          pattern: '^[0-9]+(\.[0-9]+)?(Ki|Mi|Gi|Ti|Pi|Ei)$'

    AgentResourceConfigsResponse:
      type: object
      properties:
        replicas:
          type: integer
          format: int32
          description: Current number of replicas (environment-specific if environment provided, otherwise component default)
        resources:
          $ref: "#/components/schemas/ResourceConfig"
          description: Current resource configurations (environment-specific if environment provided, otherwise component default)
        defaultReplicas:
          type: integer
          format: int32
          description: Component-level default replicas (only populated when environment query parameter is provided)
        defaultResources:
          $ref: "#/components/schemas/ResourceConfig"
          description: Component-level default resources (only populated when environment query parameter is provided)
        isDefaultsOverridden:
          type: boolean
          description: Indicates whether environment-specific overrides exist (only populated when environment query parameter is provided)

    UpdateProjectRequest:
      type: object
      properties:
        displayName:
          type: string
          description: Display name of the project
        description:
          type: string
          description: Description of the project
        deploymentPipeline:
          type: string
      required:
        - displayName
        - description
        - deploymentPipeline
    AgentResponse:
      type: object
      properties:
        uuid:
          type: string
        name:
          type: string
        displayName:
          type: string
        description:
          type: string
        createdAt:
          type: string
          format: date-time
        projectName:
          type: string
        status:
          type: string
          description: Current status of the agent
        provisioning:
          $ref: "#/components/schemas/Provisioning"
        agentType:
          $ref: "#/components/schemas/AgentType"
        configurations:
          $ref: "#/components/schemas/Configurations"
        inputInterface:
          $ref: "#/components/schemas/InputInterface"
        build:
          $ref: "#/components/schemas/Build"
      required:
        - uuid
        - name
        - displayName
        - createdAt
        - projectName
        - description
        - provisioning
        - agentType
    ResourceNameRequest:
      type: object
      properties:
        displayName:
          type: string
          description: Display name of the agent
        resourceType:
          type: string
          description: Type of resource (e.g., agent, project)
        projectName:
          type: string
          description: Name of the project (required if resourceType is agent)
      required:
        - displayName
        - resourceType
    ResourceNameResponse:
      type: object
      properties:
        name:
          type: string
          description: The resource name
        displayName:
          type: string
          description: The display name of the resource
        resourceType:
          type: string
          description: Type of resource (e.g., agent, project)
      required:
        - name
        - displayName
        - resourceType
    AgentListResponse:
      type: object
      properties:
        agents:
          type: array
          items:
            $ref: "#/components/schemas/AgentResponse"
        total:
          type: integer
          description: Total number of agents matching the query
        limit:
          type: integer
        offset:
          type: integer
      required:
        - agents
        - total
        - limit
        - offset
    BuildsListResponse:
      type: object
      properties:
        builds:
          type: array
          items:
            $ref: "#/components/schemas/BuildResponse"
        total:
          type: integer
          description: Total number of builds matching the query
        limit:
          type: integer
        offset:
          type: integer
      required:
        - builds
        - total
        - limit
        - offset
    # Repository Configuration
    RepositoryConfig:
      type: object
      description: Git repository configuration
      required:
        - url
        - branch
        - appPath
      properties:
        url:
          type: string
          description: URL of the git repository
        branch:
          type: string
          description: Branch to use
        appPath:
          type: string
          description: Path within the repository where the source code resides
          pattern: "^/.*"
          example: "/my-agent"
    BuildParameters:
      type: object
      description: Parameters used for the build
      properties:
        repoUrl:
          type: string
          description: Repository URL
        appPath:
          type: string
          description: Path within the repository
        branch:
          type: string
          description: Branch name
        commitId:
          type: string
          description: Commit ID
        language:
          type: string
          description: Programming language
        languageVersion:
          type: string
          description: Language version
        runCommand:
          type: string
          description: Command to run the application
      required:
        - commitId
        - branch
        - repoUrl
        - appPath
        - language
        - languageVersion
        - runCommand
    BuildResponse:
      type: object
      properties:
        buildId:
          type: string
        buildName:
          type: string
        projectName:
          type: string
        agentName:
          type: string
        startedAt:
          type: string
          format: date-time
        endedAt:
          type: string
          format: date-time
        imageId:
          type: string
        status:
          type: string
          enum: [BuildInProgress, BuildTriggered, BuildCompleted]
        buildParameters:
          $ref: "#/components/schemas/BuildParameters"
      required:
        - buildName
        - projectName
        - agentName
        - startedAt
        - buildParameters
    LogEntry:
      type: object
      properties:
        timestamp:
          type: string
          format: date-time
        log:
          type: string
        logLevel:
          type: string
          enum: [INFO, WARN, ERROR, DEBUG]
      required:
        - timestamp
        - log
        - logLevel
    LogsResponse:
      type: object
      properties:
        logs:
          type: array
          items:
            $ref: "#/components/schemas/LogEntry"
        totalCount:
          type: integer
        tookMs:
          type: number
          format: float
      required:
        - logs
        - totalCount
        - tookMs
    BuildStep:
      type: object
      properties:
        type:
          type: string
          description: Type of build step
          enum:
            [
              BuildInitiated,
              BuildTriggered,
              BuildRunning,
              BuildCompleted,
              WorkloadUpdated,
            ]
        status:
          type: string
          description: Status of the build step
          enum: [Succeeded, Failed, Running, Pending]
        message:
          type: string
          description: Human-readable message about the step
        startedAt:
          type: string
          format: date-time
          description: Timestamp when the step occurred
        finishedAt:
          type: string
          format: date-time
          description: Timestamp when the step finished
      required:
        - type
        - status
        - message

    BuildDetailsResponse:
      allOf:
        - $ref: "#/components/schemas/BuildResponse"
        - type: object
          properties:
            percent:
              type: number
              format: float
              description: Build completion percentage (0-100)
              minimum: 0
              maximum: 100
            steps:
              type: array
              description: Array of build steps with their status
              items:
                $ref: "#/components/schemas/BuildStep"
            durationSeconds:
              type: integer
              description: Build duration in seconds
              minimum: 0
            inputInterface:
              $ref: "#/components/schemas/InputInterface"

    # Deployment Schemas
    DeployAgentRequest:
      type: object
      properties:
        imageId:
          type: string
          description: Container image ID to deploy
        env:
          type: array
          description: Environment variables
          items:
            $ref: "#/components/schemas/EnvironmentVariable"
      required:
        - imageId
    Configurations:
      type: object
      properties:
        env:
          type: array
          description: Environment variables
          items:
            $ref: "#/components/schemas/EnvironmentVariable"
    EnvironmentVariable:
      type: object
      required:
        - key
        - value
      properties:
        key:
          type: string
        value:
          type: string
    InputInterface:
      type: object
      description: Endpoint configurations
      required:
        - type
      properties:
        type:
          type: string
          description: Type of the endpoint (e.g., HTTP)
        port:
          type: integer
          description: Port number
          minimum: 1
          maximum: 65535
        schema:
          $ref: "#/components/schemas/InputInterfaceSchema"
        basePath:
          type: string
          description: Base path for the endpoint
    InputInterfaceSchema:
      type: object
      properties:
        path:
          type: string
          description: Path to OpenAPI schema file
          pattern: "^/.*"
          example: "/openapi.yaml"
      required:
        - path
    EndpointSchema:
      type: object
      required:
        - content
      properties:
        content:
          type: string
          description: Schema content
    DeploymentResponse:
      type: object
      properties:
        agentName:
          type: string
        projectName:
          type: string
        imageId:
          type: string
        environment:
          type: string
      required:
        - agentName
        - projectName
        - imageId
        - environment

    DeploymentEndpoint:
      type: object
      properties:
        name:
          type: string
          description: Name of the endpoint
        url:
          type: string
          description: URL of the endpoint
        visibility:
          type: string
          description: Visibility level of the endpoint
          enum: [Public, Private, Internal]
      required:
        - name
        - url
        - visibility

    DeploymentDetailsResponse:
      type: object
      properties:
        imageId:
          type: string
          description: Container image ID
        status:
          type: string
          description: Deployment status
        lastDeployed:
          type: string
          format: date-time
          description: Timestamp of last deployment
        endpoints:
          type: array
          description: List of deployment endpoints
          items:
            $ref: "#/components/schemas/DeploymentEndpoint"
        environmentDisplayName:
          type: string
          description: Environment display name
        promotionTargetEnvironment:
          type: object
          description: Promotion target environment details
          properties:
            name:
              type: string
              description: name of the promotion target environment
            displayName:
              type: string
              description: Human-readable display name of the promotion target environment
          required:
            - name
            - displayName
      required:
        - imageId
        - status
        - lastDeployed
        - endpoints
    DeploymentListResponse:
      type: object
      additionalProperties:
        $ref: "#/components/schemas/DeploymentDetailsResponse"
      description: Map of environment names to deployment details. Keys are ordered according to deployment pipeline sequence.

    EnvironmentObject:
      type: object
      properties:
        name:
          type: string
          description: Environment name
        displayName:
          type: string
          description: Human-readable display name of the environment
      required:
        - name
        - displayName

    EndpointConfiguration:
      type: object
      properties:
        url:
          type: string
          description: URL of the endpoint
        endpointName:
          type: string
          description: Name of the endpoint
        schema:
          $ref: "#/components/schemas/EndpointSchema"
        visibility:
          type: string
          description: Visibility level of the endpoint
      required:
        - url
        - endpointName
        - schema
        - visibility

    EndpointsResponse:
      type: object
      additionalProperties:
        $ref: "#/components/schemas/EndpointConfiguration"
      description: Map of endpoint names to endpoint configurations

    Environment:
      type: object
      properties:
        uuid:
          type: string
          description: Unique identifier of the environment
        name:
          type: string
          description: Name of the environment
        dataplaneRef:
          type: string
          description: Reference to the data plane for the environment
        displayName:
          type: string
          description: Human-readable display name
        isProduction:
          type: boolean
          description: Whether this is a production environment
        dnsPrefix:
          type: string
          description: DNS prefix for the environment
        createdAt:
          type: string
          format: date-time
          description: Timestamp when the environment was created
      required:
        - uuid
        - name
        - dataplaneRef
        - isProduction
        - createdAt

    EnvironmentListResponse:
      type: array
      items:
        $ref: "#/components/schemas/Environment"
      description: List of environments

    DataPlane:
      type: object
      properties:
        name:
          type: string
          description: Name of the data plane
        displayName:
          type: string
          description: Human-readable display name
        description:
          type: string
          description: Description of the data plane
        orgName:
          type: string
          description: Organization name
        createdAt:
          type: string
          format: date-time
          description: Timestamp when the data plane was created
      required:
        - name
        - displayName
        - description
        - orgName
        - createdAt

    DataPlaneListResponse:
      type: array
      items:
        $ref: "#/components/schemas/DataPlane"
      description: List of data planes

    DeploymentPipelineResponse:
      type: object
      properties:
        name:
          type: string
          description: Name of the deployment pipeline
        displayName:
          type: string
          description: Human-readable display name
        description:
          type: string
          description: Description of the deployment pipeline
        orgName:
          type: string
          description: Organization name
        createdAt:
          type: string
          format: date-time
          description: Timestamp when the pipeline was created
        promotionPaths:
          type: array
          description: List of promotion paths in the pipeline
          items:
            $ref: "#/components/schemas/PromotionPath"
      required:
        - name
        - displayName
        - description
        - orgName
        - createdAt
        - promotionPaths

    DeploymentPipelineListResponse:
      type: object
      properties:
        deploymentPipelines:
          type: array
          items:
            $ref: "#/components/schemas/DeploymentPipelineResponse"
        total:
          type: integer
          description: Total number of deployment pipelines matching the query
        limit:
          type: integer
        offset:
          type: integer
      required:
        - deploymentPipelines
        - total
        - limit
        - offset

    PromotionPath:
      type: object
      properties:
        sourceEnvironmentRef:
          type: string
          description: Reference to the source environment
        targetEnvironmentRefs:
          type: array
          description: List of target environment references
          items:
            $ref: "#/components/schemas/TargetEnvironmentRef"
      required:
        - sourceEnvironmentRef
        - targetEnvironmentRefs

    TargetEnvironmentRef:
      type: object
      properties:
        name:
          type: string
          description: Name of the target environment
      required:
        - name

    ConfigurationResponse:
      type: object
      properties:
        projectName:
          type: string
          description: Name of the project
        agentName:
          type: string
          description: Name of the agent
        environment:
          type: string
          description: Environment name
        configurations:
          type: array
          description: List of configuration key-value pairs
          items:
            $ref: "#/components/schemas/ConfigurationItem"
      required:
        - projectName
        - agentName
        - environment
        - configurations

    ConfigurationItem:
      type: object
      properties:
        key:
          type: string
          description: Configuration key
        value:
          type: string
          description: Configuration value
      required:
        - key
        - value

    OrganizationResponse:
      type: object
      properties:
        name:
          type: string
          description: Name of the organization
        displayName:
          type: string
          description: Display name of the organization
        description:
          type: string
          description: Description of the organization
        namespace:
          type: string
          description: Namespace of the organization
        createdAt:
          type: string
          format: date-time
          description: Timestamp when the organization was created
      required:
        - name
        - createdAt
        - displayName
        - description
        - namespace
    OrganizationListItem:
      type: object
      properties:
        name:
          type: string
          description: Name of the organization
        createdAt:
          type: string
          format: date-time
          description: Timestamp when the organization was created
      required:
        - name
        - createdAt

    OrganizationListResponse:
      type: object
      properties:
        organizations:
          type: array
          items:
            $ref: "#/components/schemas/OrganizationListItem"
        total:
          type: integer
          description: Total number of organizations matching the query
        limit:
          type: integer
        offset:
          type: integer
      required:
        - organizations
        - total
        - limit
        - offset

    ProjectResponse:
      type: object
      properties:
        uuid:
          type: string
        name:
          type: string
          description: Name of the project
        orgName:
          type: string
          description: Name of the organization
        displayName:
          type: string
          description: Display name of the project
        description:
          type: string
          description: Description of the project
        deploymentPipeline:
          type: string
          description: Deployment pipeline associated with the project
        createdAt:
          type: string
          format: date-time
          description: Timestamp when the project was created
      required:
        - uuid
        - name
        - orgName
        - displayName
        - description
        - deploymentPipeline
        - createdAt

    ProjectListItem:
      type: object
      properties:
        uuid:
          type: string
        name:
          type: string
          description: Name of the project
        orgName:
          type: string
          description: Name of the organization
        displayName:
          type: string
          description: Display name of the project
        createdAt:
          type: string
          format: date-time
          description: Timestamp when the project was created
      required:
        - uuid
        - name
        - orgName
        - displayName
        - createdAt

    ProjectListResponse:
      type: object
      properties:
        projects:
          type: array
          items:
            $ref: "#/components/schemas/ProjectListItem"
        total:
          type: integer
          description: Total number of projects matching the query
        limit:
          type: integer
        offset:
          type: integer
      required:
        - projects
        - total
        - limit
        - offset

    CreateMonitorRequest:
      type: object
      required:
        - name
        - displayName
        - environmentName
        - evaluators
        - type
      properties:
        name:
          type: string
          description: Unique DNS-compatible name for the monitor (lowercase, alphanumeric, hyphens only)
          pattern: "^[a-z0-9-]+$"
          minLength: 1
          maxLength: 63
          example: "customer-support-quality"
        displayName:
          type: string
          description: Human-readable display name
          minLength: 1
          maxLength: 128
          example: "Customer Support Quality Monitor"
        environmentName:
          type: string
          description: Name of the environment to monitor
          example: "development"
        evaluators:
          type: array
          description: List of evaluators with optional configuration
          items:
            $ref: "#/components/schemas/MonitorEvaluator"
          minItems: 1
          example:
            - identifier: "latency"
              displayName: "Latency Check"
              level: "span"
              config:
                max_latency_ms: 3000
            - identifier: "answer_relevancy"
              displayName: "Answer Relevancy"
              level: "trace"
              config:
                min_overlap_ratio: 0.2
        type:
          type: string
          description: Monitor type - 'future' for continuous monitoring, 'past' for one-time historical analysis
          enum: [future, past]
          example: "future"
        intervalMinutes:
          type: integer
          description: Interval in minutes for continuous monitoring (required for 'future' type, default 60)
          minimum: 5
          example: 60
        traceStart:
          type: string
          format: date-time
          description: Start time for trace collection (required for 'past' type)
          example: "2026-02-01T00:00:00Z"
        traceEnd:
          type: string
          format: date-time
          description: End time for trace collection (required for 'past' type)
          example: "2026-02-12T00:00:00Z"
        samplingRate:
          type: number
          format: float
          description: Sampling rate for trace collection (0.0 to 1.0, default 1.0)
          minimum: 0.0
          maximum: 1.0
          example: 1.0

    UpdateMonitorRequest:
      type: object
      properties:
        displayName:
          type: string
          description: Human-readable display name
          minLength: 1
          maxLength: 128
        evaluators:
          type: array
          description: List of evaluators with optional configuration
          items:
            $ref: "#/components/schemas/MonitorEvaluator"
          minItems: 1
        intervalMinutes:
          type: integer
          description: Interval in minutes for continuous monitoring (only for 'future' type)
          minimum: 5
        samplingRate:
          type: number
          format: float
          description: Sampling rate for trace collection (0.0 to 1.0)
          minimum: 0.0
          maximum: 1.0

    MonitorResponse:
      type: object
      required:
        - id
        - name
        - displayName
        - type
        - orgName
        - projectName
        - agentName
        - environmentName
        - evaluators
        - samplingRate
        - status
        - createdAt
      properties:
        id:
          type: string
          description: Unique identifier for the monitor
          example: "550e8400-e29b-41d4-a716-446655440000"
        name:
          type: string
          description: Monitor name
          example: "customer-support-quality"
        displayName:
          type: string
          description: Display name
          example: "Customer Support Quality Monitor"
        type:
          type: string
          description: Monitor type
          enum: [future, past]
          example: "future"
        orgName:
          type: string
          description: Organization name
          example: "default"
        projectName:
          type: string
          description: Project name
          example: "customer-support-project"
        agentName:
          type: string
          description: Agent name
          example: "support-agent"
        environmentName:
          type: string
          description: Environment name
          example: "development"
        evaluators:
          type: array
          description: List of evaluators with configuration
          items:
            $ref: "#/components/schemas/MonitorEvaluator"
          example:
            - identifier: "latency"
              displayName: "Latency Check"
              level: "span"
              config:
                max_latency_ms: 3000
            - identifier: "answer_relevancy"
              displayName: "Answer Relevancy"
              level: "trace"
        intervalMinutes:
          type: integer
          description: Interval in minutes (only for 'future' type)
          example: 60
        nextRunTime:
          type: string
          format: date-time
          description: Next scheduled run time (only for 'future' type)
          example: "2026-02-12T14:30:00Z"
        traceStart:
          type: string
          format: date-time
          description: Start time for traces (only for 'past' type)
          example: "2026-02-01T00:00:00Z"
        traceEnd:
          type: string
          format: date-time
          description: End time for traces (only for 'past' type)
          example: "2026-02-12T00:00:00Z"
        samplingRate:
          type: number
          format: float
          description: Sampling rate for trace collection
          example: 1.0
          minimum: 0.0
          maximum: 1.0
        status:
          type: string
          description: Current monitor status
          enum: [active, suspended, failed, unknown]
          example: "active"
        latestRun:
          $ref: "#/components/schemas/MonitorRunResponse"
        createdAt:
          type: string
          format: date-time
          description: Creation timestamp
          example: "2026-02-10T09:00:00Z"

    MonitorListResponse:
      type: object
      required:
        - monitors
        - total
      properties:
        monitors:
          type: array
          items:
            $ref: "#/components/schemas/MonitorResponse"
          description: List of monitors
        total:
          type: integer
          description: Total number of monitors
          example: 5

    MonitorRunResponse:
      type: object
      required:
        - id
        - evaluators
        - traceStart
        - traceEnd
        - status
      properties:
        id:
          type: string
          description: Unique identifier for the run
          example: "660e8400-e29b-41d4-a716-446655440001"
        monitorName:
          type: string
          description: Name of the monitor
          example: "customer-support-quality"
        evaluators:
          type: array
          description: Evaluators used in this run (snapshot at run time)
          items:
            $ref: "#/components/schemas/MonitorEvaluator"
          example:
            - identifier: "latency"
              displayName: "Latency Check"
              level: "span"
              config:
                max_latency_ms: 3000
            - identifier: "answer_relevancy"
              displayName: "Answer Relevancy"
              level: "trace"
        traceStart:
          type: string
          format: date-time
          description: Trace collection start time
          example: "2026-02-12T13:00:00Z"
        traceEnd:
          type: string
          format: date-time
          description: Trace collection end time
          example: "2026-02-12T14:00:00Z"
        startedAt:
          type: string
          format: date-time
          description: When the run execution started
          example: "2026-02-12T14:00:05Z"
        completedAt:
          type: string
          format: date-time
          description: When the run execution completed
          example: "2026-02-12T14:05:30Z"
        status:
          type: string
          description: Run execution status
          enum: [pending, running, success, failed]
          example: "success"
        errorMessage:
          type: string
          description: Error message if status is 'failed'
          example: "Failed to fetch traces from observer service"

    MonitorRunListResponse:
      type: object
      required:
        - runs
        - total
      properties:
        runs:
          type: array
          items:
            $ref: "#/components/schemas/MonitorRunResponse"
          description: List of monitor runs
        total:
          type: integer
          description: Total number of runs
          example: 24

    MonitorEvaluator:
      type: object
      required:
        - identifier
        - displayName
        - level
      properties:
        identifier:
          type: string
          description: Evaluator type/definition key for catalog lookup (e.g., "latency", "answer_relevancy", "deepeval/plan-quality")
          example: "latency"
          minLength: 1
        displayName:
          type: string
          description: User-facing name, unique per monitor (e.g., "Latency Check", "Customer Query Latency")
          example: "Latency Check"
          minLength: 1
        config:
          type: object
          description: Optional evaluator-specific configuration parameters
          additionalProperties: true
          example:
            max_latency_ms: 3000
            use_task_constraint: false
        level:
          type: string
          description: Evaluation level
          enum:
            - trace
            - agent
            - span
          example: "trace"

    EvaluatorResponse:
      type: object
      required:
        - id
        - identifier
        - displayName
        - description
        - version
        - provider
        - tags
        - isBuiltin
        - configSchema
        - createdAt
        - updatedAt
      properties:
        id:
          type: string
          description: Unique evaluator ID
          example: "550e8400-e29b-41d4-a716-446655440000"
        identifier:
          type: string
          description: Evaluator identifier (e.g., hallucination)
          example: "hallucination"
        displayName:
          type: string
          description: Human-readable display name
          example: "Hallucination Detection"
        description:
          type: string
          description: Description of what the evaluator does
          example: "Detects hallucinations in LLM responses by checking factual consistency"
        version:
          type: string
          description: Evaluator version
          example: "1.0"
        provider:
          type: string
          description: SDK binding provider
          example: "deepeval"
        tags:
          type: array
          items:
            type: string
          description: Classification tags
          example: ["quality", "factuality"]
        isBuiltin:
          type: boolean
          description: Whether this is a platform-provided builtin evaluator
          example: true
        configSchema:
          type: array
          items:
            $ref: "#/components/schemas/EvaluatorConfigParam"
          description: Configuration schema for the evaluator
        createdAt:
          type: string
          format: date-time
          description: Creation timestamp
          example: "2026-01-01T00:00:00Z"
        updatedAt:
          type: string
          format: date-time
          description: Last update timestamp
          example: "2026-01-01T00:00:00Z"

    EvaluatorConfigParam:
      type: object
      required:
        - key
        - type
        - description
        - required
      properties:
        key:
          type: string
          description: Parameter key/name
          example: "threshold"
        type:
          type: string
          description: Parameter type
          enum: [string, integer, float, boolean, array, enum]
          example: "float"
        description:
          type: string
          description: Parameter description
          example: "Threshold for hallucination detection"
        required:
          type: boolean
          description: Whether this parameter is required
          example: false
        default:
          description: Default value for the parameter
          example: 0.5
        min:
          type: number
          format: double
          description: Minimum value (for numeric types)
          example: 0.0
        max:
          type: number
          format: double
          description: Maximum value (for numeric types)
          example: 1.0
        enumValues:
          type: array
          items:
            type: string
          description: Possible values (for enum type)
          example: ["strict", "moderate", "lenient"]

    EvaluatorListResponse:
      type: object
      required:
        - evaluators
        - total
        - limit
        - offset
      properties:
        evaluators:
          type: array
          items:
            $ref: "#/components/schemas/EvaluatorResponse"
          description: List of evaluators
        total:
          type: integer
          description: Total number of evaluators
          example: 8
        limit:
          type: integer
          format: int32
          description: Number of evaluators per page
          example: 10
        offset:
          type: integer
          format: int32
          description: Number of evaluators to skip
          example: 0

    ErrorResponse:
      type: object
      properties:
        message:
          type: string
          description: Human-readable error message
        description:
          type: string
          description: Error description
        additionalData:
          type: object
          additionalProperties: true
      required:
        - message

    AgentTypeSubtype:
      type: object
      properties:
        name:
          type: string
          description: Name of the agent subtype
        displayName:
          type: string
          description: Display name of the agent subtype
        description:
          type: string
          description: Description of the agent subtype
      required:
        - name
        - displayName
        - description

    AgentTypeResponse:
      type: object
      properties:
        name:
          type: string
          description: Name of the agent type
        displayName:
          type: string
          description: Display name of the agent type
        description:
          type: string
          description: Description of the agent type
        subtypes:
          type: array
          items:
            $ref: "#/components/schemas/AgentTypeSubtype"
          description: List of subtypes for this agent type
      required:
        - name
        - displayName
        - description
        - subtypes

    TraceOverviewResponse:
      type: object
      properties:
        traces:
          type: array
          items:
            $ref: "#/components/schemas/TraceOverview"
          description: List of trace overviews
        totalCount:
          type: integer
          description: Total number of traces matching the query
      required:
        - traces
        - totalCount

    TraceExportResponse:
      type: object
      properties:
        traces:
          type: array
          items:
            $ref: "#/components/schemas/FullTrace"
          description: List of complete trace objects with all span details
        totalCount:
          type: integer
          description: Total number of traces available for export
      required:
        - traces
        - totalCount

    FullTrace:
      type: object
      properties:
        traceId:
          type: string
          description: Unique identifier for the trace
        rootSpanId:
          type: string
          description: ID of the root span in the trace
        rootSpanName:
          type: string
          description: Name of the root span
        rootSpanKind:
          type: string
          description: Semantic kind of the root span (llm, tool, agent, etc.)
        startTime:
          type: string
          format: date-time
          description: Trace start time
        endTime:
          type: string
          format: date-time
          description: Trace end time
        durationInNanos:
          type: integer
          format: int64
          description: Total trace duration in nanoseconds
        spanCount:
          type: integer
          description: Number of spans in this trace
        tokenUsage:
          $ref: "#/components/schemas/TokenUsage"
        status:
          $ref: "#/components/schemas/TraceStatus"
        input:
          description: Input data from the root span
          nullable: true
        output:
          description: Output data from the root span
          nullable: true
        spans:
          type: array
          items:
            $ref: "#/components/schemas/Span"
          description: All spans in the trace with complete details
      required:
        - traceId
        - rootSpanId
        - rootSpanName
        - startTime
        - endTime
        - spans

    TraceOverview:
      type: object
      properties:
        traceId:
          type: string
          description: Unique identifier for the trace
        rootSpanId:
          type: string
          description: ID of the root span in the trace
        rootSpanName:
          type: string
          description: Name of the root span
        rootSpanKind:
          type: string
          description: Semantic kind of the root span (llm, tool, embedding, etc.)
        startTime:
          type: string
          format: date-time
          description: Trace start time
        endTime:
          type: string
          format: date-time
          description: Trace end time
        durationInNanos:
          type: integer
          format: int64
          description: Trace duration in nanoseconds
        spanCount:
          type: integer
          description: Number of spans in the trace
        tokenUsage:
          $ref: "#/components/schemas/TokenUsage"
        status:
          $ref: "#/components/schemas/TraceStatus"
        input:
          type: string
          description: Input from root span's traceloop.entity.input
        output:
          type: string
          description: Output from root span's traceloop.entity.output
      required:
        - traceId
        - rootSpanId
        - rootSpanName
        - startTime
        - endTime
        - durationInNanos
        - spanCount

    TokenUsage:
      type: object
      properties:
        inputTokens:
          type: integer
          description: Number of input tokens consumed
        outputTokens:
          type: integer
          description: Number of output tokens generated
        totalTokens:
          type: integer
          description: Total tokens (input + output)
      required:
        - inputTokens
        - outputTokens
        - totalTokens

    TraceStatus:
      type: object
      properties:
        errorCount:
          type: integer
          description: Number of spans with errors (0 means no errors)
      required:
        - errorCount

    TraceResponse:
      type: object
      properties:
        spans:
          type: array
          items:
            $ref: "#/components/schemas/Span"
          description: List of spans in the trace
        totalCount:
          type: integer
          description: Total number of spans in the trace
        tokenUsage:
          $ref: "#/components/schemas/TokenUsage"
        status:
          $ref: "#/components/schemas/TraceStatus"
      required:
        - spans
        - totalCount

    Span:
      type: object
      properties:
        traceId:
          type: string
          description: Trace ID this span belongs to
        spanId:
          type: string
          description: Unique span identifier
        parentSpanId:
          type: string
          description: Parent span ID (if this is a child span)
        name:
          type: string
          description: Span name/operation
        service:
          type: string
          description: Service name
        kind:
          type: string
          description: Span kind (CLIENT, SERVER, INTERNAL, etc.)
        startTime:
          type: string
          format: date-time
          description: Span start time
        endTime:
          type: string
          format: date-time
          description: Span end time
        durationInNanos:
          type: integer
          format: int64
          description: Span duration in nanoseconds
        status:
          type: string
          description: Span status
        attributes:
          type: object
          additionalProperties: true
          description: Raw span attributes
        resource:
          type: object
          additionalProperties: true
          description: Resource attributes
        ampAttributes:
          $ref: "#/components/schemas/AmpAttributes"
      required:
        - traceId
        - spanId
        - name
        - service
        - startTime
        - durationInNanos

    AmpAttributes:
      type: object
      properties:
        kind:
          type: string
          description: Semantic span type (llm, tool, embedding, retriever, agent, etc.)
        input:
          oneOf:
            - type: array
              items:
                $ref: "#/components/schemas/PromptMessage"
            - type: array
              items:
                type: string
            - type: string
          description: Input data - varies by span kind ([]PromptMessage for LLM, []string for embedding, string for tool/agent)
        output:
          oneOf:
            - type: array
              items:
                $ref: "#/components/schemas/PromptMessage"
            - type: string
          description: Output data - varies by span kind ([]PromptMessage for LLM, string for tool/agent)
        status:
          $ref: "#/components/schemas/SpanStatus"
        data:
          oneOf:
            - $ref: "#/components/schemas/LLMData"
            - $ref: "#/components/schemas/ToolData"
            - $ref: "#/components/schemas/EmbeddingData"
            - $ref: "#/components/schemas/RetrieverData"
            - $ref: "#/components/schemas/AgentData"
          description: Kind-specific data based on the span type
      required:
        - kind

    LLMData:
      type: object
      properties:
        tools:
          type: array
          items:
            $ref: "#/components/schemas/ToolDefinition"
          description: Available tools/functions
        model:
          type: string
          description: Model name
        vendor:
          type: string
          description: LLM vendor/provider (e.g., openai, anthropic)
        temperature:
          type: number
          format: float
          description: Temperature parameter
        tokenUsage:
          $ref: "#/components/schemas/LLMTokenUsage"

    ToolData:
      type: object
      properties:
        name:
          type: string
          description: Tool/function name

    EmbeddingData:
      type: object
      properties:
        model:
          type: string
          description: Embedding model name
        vendor:
          type: string
          description: Embedding vendor/provider
        tokenUsage:
          $ref: "#/components/schemas/LLMTokenUsage"

    RetrieverData:
      type: object
      properties:
        vectorDB:
          type: string
          description: Vector database system (e.g., chroma, pinecone)
        topK:
          type: integer
          description: Number of top results requested

    AgentData:
      type: object
      properties:
        name:
          type: string
          description: Agent name
        tools:
          type: array
          items:
            type: string
          description: Available tool names for the agent
        model:
          type: string
          description: Model used by the agent
        framework:
          type: string
          description: Agent framework (e.g., strands-agents, langchain)
        systemPrompt:
          type: string
          description: System prompt for the agent
        tokenUsage:
          $ref: "#/components/schemas/LLMTokenUsage"

    PromptMessage:
      type: object
      properties:
        role:
          type: string
          enum: [system, user, assistant, tool]
          description: Message role
        content:
          type: string
          description: Message content
        toolCalls:
          type: array
          items:
            $ref: "#/components/schemas/ToolCall"
          description: Tool calls made by assistant
      required:
        - role

    ToolCall:
      type: object
      properties:
        id:
          type: string
          description: Tool call ID
        name:
          type: string
          description: Function/tool name
        arguments:
          type: string
          description: JSON arguments for the tool
      required:
        - id
        - name
        - arguments

    MetricsFilterRequest:
      type: object
      description: Request body for filtering and retrieving agent resource metrics
      required:
        - environmentName
        - startTime
        - endTime
      properties:
        environmentName:
          type: string
          description: Environment name
        startTime:
          type: string
          format: string
          description: Start time for metrics filtering (RFC3339 format)
        endTime:
          type: string
          format: string
          description: End time for metrics filtering (RFC3339 format)

    MetricsResponse:
      type: object
      description: Resource metrics response containing CPU and memory usage data
      properties:
        cpuUsage:
          type: array
          description: CPU usage metrics over time
          items:
            $ref: "#/components/schemas/MetricDataPoint"
        cpuRequests:
          type: array
          description: CPU request values over time
          items:
            $ref: "#/components/schemas/MetricDataPoint"
        cpuLimits:
          type: array
          description: CPU limit values over time
          items:
            $ref: "#/components/schemas/MetricDataPoint"
        memory:
          type: array
          description: Memory usage in bytes over time
          items:
            $ref: "#/components/schemas/MetricDataPoint"
        memoryRequests:
          type: array
          description: Memory request values in bytes over time
          items:
            $ref: "#/components/schemas/MetricDataPoint"
        memoryLimits:
          type: array
          description: Memory limit values in bytes over time
          items:
            $ref: "#/components/schemas/MetricDataPoint"
      required:
        - cpuUsage
        - cpuRequests
        - cpuLimits
        - memory
        - memoryRequests
        - memoryLimits

    MetricDataPoint:
      type: object
      description: A single metric data point with timestamp and value
      properties:
        time:
          type: string
          format: string
          description: Timestamp of the metric data point in RFC3339 format
        value:
          type: number
          format: double
          description: Metric value (CPU as decimal cores, memory as bytes)
      required:
        - time
        - value

    LogFilterRequest:
      type: object
      description: Request body for filtering and retrieving application logs
      required:
        - environmentName
        - startTime
        - endTime
      properties:
        environmentName:
          type: string
          description: Environment name
        startTime:
          type: string
          format: string
          description: Start time for log filtering (RFC3339 format). Must be provided with endTime.
        endTime:
          type: string
          format: string
          description: End time for log filtering (RFC3339 format). Must be provided with startTime.
        limit:
          type: integer
          description: Maximum number of log entries to return
          minimum: 1
          maximum: 10000
        sortOrder:
          type: string
          description: Sort order of the logs
          enum: [asc, desc]
        logLevels:
          type: array
          description: Array of log levels to filter by
          items:
            type: string
            enum: [DEBUG, INFO, WARN, ERROR]
        searchPhrase:
          type: string
          description: Search phrase to filter logs by content

    ToolDefinition:
      type: object
      properties:
        name:
          type: string
          description: Function name
        description:
          type: string
          description: Function description
        parameters:
          type: string
          description: JSON schema of parameters
      required:
        - name

    SpanStatus:
      type: object
      properties:
        error:
          type: boolean
          description: Whether the span has an error
        errorType:
          type: string
          description: Type of error if present
      required:
        - error

    LLMTokenUsage:
      type: object
      properties:
        inputTokens:
          type: integer
          description: Number of input tokens
        outputTokens:
          type: integer
          description: Number of output tokens
        cacheReadInputTokens:
          type: integer
          description: Number of cached input tokens read
        totalTokens:
          type: integer
          description: Total tokens used
      required:
        - inputTokens
        - outputTokens
        - totalTokens

    TokenRequest:
      type: object
      properties:
        expires_in:
          type: string
          description: |
            Optional token expiry duration in Go duration format (e.g., "720h" for 30 days, "8760h" for 1 year).
            If not provided, the default expiry from configuration is used.
          example: "720h"

    TokenResponse:
      type: object
      required:
        - token
        - expires_at
        - issued_at
        - token_type
      properties:
        token:
          type: string
          description: The signed JWT token
          example: "eyJhbGciOiJSUzI1NiIsInR5cCI6IkpXVCIsImtpZCI6ImtleS0xIn0..."
        expires_at:
          type: integer
          format: int64
          description: Unix timestamp when the token expires
          example: 1735718400
        issued_at:
          type: integer
          format: int64
          description: Unix timestamp when the token was issued
          example: 1704182400
        token_type:
          type: string
          description: Type of token (always "Bearer")
          example: "Bearer"

    JWKS:
      type: object
      required:
        - keys
      properties:
        keys:
          type: array
          description: Array of JSON Web Keys
          items:
            $ref: "#/components/schemas/JWK"

    JWK:
      type: object
      required:
        - kty
        - alg
        - use
        - kid
        - n
        - e
      properties:
        kty:
          type: string
          description: Key type (RSA)
          example: "RSA"
        alg:
          type: string
          description: Algorithm (RS256)
          example: "RS256"
        use:
          type: string
          description: Intended use (sig for signature)
          example: "sig"
        kid:
          type: string
          description: Key ID
          example: "key-1"
        n:
          type: string
          description: RSA modulus (Base64urlUInt-encoded)
          example: "xGOr-H7A-PWGfXengPm..."
        e:
          type: string
          description: RSA exponent (Base64urlUInt-encoded)
          example: "AQAB"

    ListBranchesRequest:
      type: object
      description: Request body for listing repository branches
      required:
        - owner
        - repository
      properties:
        owner:
          type: string
          description: Repository owner (organization or user)
          example: "octocat"
        repository:
          type: string
          description: Repository name
          example: "hello-world"
        includeDefault:
          type: boolean
          description: Whether to include default branch information in the response
          default: false
          example: true

    ListBranchesResponse:
      type: object
      description: Response containing list of branches
      required:
        - branches
        - limit
        - offset
      properties:
        branches:
          type: array
          items:
            $ref: "#/components/schemas/Branch"
          description: List of branches
        nextOffset:
          type: integer
          description: Offset to use for fetching the next page (only present when more results are available)
        limit:
          type: integer
          description: Maximum number of results returned
        offset:
          type: integer
          description: Number of results skipped

    Branch:
      type: object
      description: Git branch information
      required:
        - name
        - commitSha
        - isDefault
      properties:
        name:
          type: string
          description: Branch name
          example: "main"
        commitSha:
          type: string
          description: SHA of the latest commit on this branch
          example: "c5b97d5ae6c19d5c5df71a34c7fbeeda2479ccbc"
        isDefault:
          type: boolean
          description: Whether this is the default branch of the repository
          example: true

    ListCommitsRequest:
      type: object
      description: Request body for listing repository commits
      required:
        - owner
        - repo
      properties:
        owner:
          type: string
          description: Repository owner (organization or user)
          example: "octocat"
        repo:
          type: string
          description: Repository name
          example: "hello-world"
        branch:
          type: string
          description: Branch name or SHA to list commits from (defaults to repository's default branch)
          example: "main"
        path:
          type: string
          description: Filter commits affecting this file path
          example: "src/main.go"
        author:
          type: string
          description: Filter commits by author (GitHub username or email)
          example: "octocat"
        since:
          type: string
          format: date-time
          description: Filter commits after this date (RFC3339 format)
          example: "2025-01-01T00:00:00Z"
        until:
          type: string
          format: date-time
          description: Filter commits before this date (RFC3339 format)
          example: "2025-12-31T23:59:59Z"

    ListCommitsResponse:
      type: object
      description: Response containing list of commits
      required:
        - commits
        - limit
        - offset
      properties:
        commits:
          type: array
          items:
            $ref: "#/components/schemas/Commit"
          description: List of commits
        nextOffset:
          type: integer
          description: Offset to use for fetching the next page (only present when more results are available)
        limit:
          type: integer
          description: Maximum number of results returned
        offset:
          type: integer
          description: Number of results skipped

    Commit:
      type: object
      description: Git commit information
      required:
        - sha
        - shortSha
        - message
        - author
        - timestamp
        - isLatest
      properties:
        sha:
          type: string
          description: Full commit SHA
          example: "c5b97d5ae6c19d5c5df71a34c7fbeeda2479ccbc"
        shortSha:
          type: string
          description: Short commit SHA (first 7 characters)
          example: "c5b97d5"
        message:
          type: string
          description: Commit message
          example: "Fix authentication bug"
        author:
          $ref: "#/components/schemas/CommitAuthor"
        timestamp:
          type: string
          format: date-time
          description: Commit timestamp
          example: "2025-01-15T10:30:00Z"
        isLatest:
          type: boolean
          description: Whether this is the latest commit on the branch
          example: true

    CommitAuthor:
      type: object
      description: Commit author information
      required:
        - name
        - email
      properties:
        name:
          type: string
          description: Author name
          example: "The Octocat"
        email:
          type: string
          description: Author email
          example: "octocat@github.com"
        avatarUrl:
          type: string
          description: URL to the author's avatar image
          example: "https://avatars.githubusercontent.com/u/583231?v=4"

    # ============================================
    # GATEWAY ENVIRONMENT MANAGEMENT SCHEMAS
    # ============================================

    GatewayEnvironmentResponse:
      type: object
      required:
        - id
        - organizationName
        - name
        - displayName
        - dataplaneRef
        - dnsPrefix
        - isProduction
        - createdAt
        - updatedAt
      properties:
        id:
          type: string
          description: Unique identifier for the environment
          example: 550e8400-e29b-41d4-a716-446655440000
        organizationName:
          type: string
          description: Organization UUID
          example: 123e4567-e89b-12d3-a456-426614174000
        name:
          type: string
          description: Unique environment name (lowercase, alphanumeric with hyphens)
          pattern: "^[a-z0-9-]+$"
          maxLength: 64
          example: production
        displayName:
          type: string
          description: Human-readable display name
          maxLength: 128
          example: Production Environment
        description:
          type: string
          description: Optional description of the environment
          example: Production environment for critical AI agents
        dataplaneRef:
          type: string
          description: Reference to the dataplane
          maxLength: 100
          example: default
        dnsPrefix:
          type: string
          description: DNS prefix for the environment
          maxLength: 100
          example: default
        isProduction:
          type: boolean
          description: Whether this is a production environment
          example: false
        createdAt:
          type: string
          format: date-time
          description: Timestamp when the environment was created
          example: "2026-01-15T10:30:00Z"
        updatedAt:
          type: string
          format: date-time
          description: Timestamp when the environment was last updated
          example: "2026-01-20T14:45:00Z"

    CreateEnvironmentRequest:
      type: object
      required:
        - name
        - displayName
        - dataplaneRef
        - dnsPrefix
      properties:
        name:
          type: string
          description: Unique environment name (lowercase, alphanumeric with hyphens)
          pattern: "^[a-z0-9-]+$"
          minLength: 1
          maxLength: 64
          example: production
        displayName:
          type: string
          description: Human-readable display name
          minLength: 1
          maxLength: 128
          example: Production Environment
        description:
          type: string
          description: Optional description of the environment
          example: Production environment for critical AI agents
        dataplaneRef:
          type: string
          description: Reference to the dataplane
          minLength: 1
          maxLength: 100
          example: default
        dnsPrefix:
          type: string
          description: DNS prefix for the environment
          minLength: 1
          maxLength: 100
          example: default
        isProduction:
          type: boolean
          description: Whether this is a production environment
          example: false

    UpdateEnvironmentRequest:
      type: object
      minProperties: 1
      properties:
        displayName:
          type: string
          description: Updated display name
          minLength: 1
          maxLength: 128
          example: Production Environment (US-East)
        description:
          type: string
          description: Updated description
          nullable: true
          example: Production environment for US East region

    # ============================================
    # AI GATEWAY MANAGEMENT SCHEMAS
    # ============================================

    GatewayType:
      type: string
      enum:
        - AI
        - REGULAR
      description: |
        Gateway type:
        - REGULAR: Handles incoming API traffic
        - AI: Handles outgoing LLM/MCP traffic (used for AI agents)
      example: AI

    GatewayStatus:
      type: string
      enum:
        - ACTIVE
        - INACTIVE
        - PROVISIONING
        - ERROR
      description: |
        Gateway operational status:
        - ACTIVE: Gateway is operational and ready
        - INACTIVE: Gateway is registered but not active
        - PROVISIONING: Gateway is being set up
        - ERROR: Gateway has encountered an error
      example: ACTIVE

    GatewayResponse:
      type: object
      required:
        - uuid
        - organizationName
        - name
        - displayName
        - gatewayType
        - vhost
        - isCritical
        - status
        - createdAt
        - updatedAt
      properties:
        uuid:
          type: string
          description: Unique identifier for the gateway
          example: 7c4a8d09-ca3f-4b0a-82e9-2e85b96dd8a7
        organizationName:
          type: string
          description: Organization UUID
          example: 123e4567-e89b-12d3-a456-426614174000
        name:
          type: string
          description: Unique gateway name (lowercase, alphanumeric with hyphens)
          pattern: "^[a-z0-9-]+$"
          maxLength: 64
          example: ai-gateway-prod
        displayName:
          type: string
          description: Human-readable display name
          maxLength: 128
          example: Production AI Gateway
        gatewayType:
          $ref: "#/components/schemas/GatewayType"
        vhost:
          type: string
          description: Virtual host for the gateway
          maxLength: 253
          example: api.production.example.com
        region:
          type: string
          description: Deployment region
          example: us-east-1
        isCritical:
          type: boolean
          description: Flag indicating if this is a critical production gateway
          example: true
        status:
          $ref: "#/components/schemas/GatewayStatus"
        createdAt:
          type: string
          format: date-time
          description: Timestamp when the gateway was registered
          example: "2026-01-15T10:30:00Z"
        updatedAt:
          type: string
          format: date-time
          description: Timestamp when the gateway was last updated
          example: "2026-02-01T08:00:00Z"
        environments:
          type: array
          description: List of environments mapped to this gateway
          items:
            $ref: "#/components/schemas/GatewayEnvironmentResponse"

    GatewayTokenResponse:
      type: object
      required:
        - gatewayId
        - token
        - tokenId
        - createdAt
      properties:
        gatewayId:
          type: string
          description: Gateway UUID
          example: 7c4a8d09-ca3f-4b0a-82e9-2e85b96dd8a7
        token:
          type: string
          description: New authentication token (only returned once)
          example: gw_1234567890abcdef1234567890abcdef1234567890abcdef
        tokenId:
          type: string
          description: Unique identifier for this token
          example: tok_7c4a8d09ca3f4b0a82e9
        createdAt:
          type: string
          format: date-time
          description: Timestamp when the token was created
          example: "2026-02-12T10:30:00Z"
        expiresAt:
          type: string
          format: date-time
          description: Token expiration time (if applicable)
          example: "2027-02-12T10:30:00Z"

    CreateGatewayRequest:
      type: object
      required:
        - name
        - displayName
        - gatewayType
        - vhost
      properties:
        name:
          type: string
          description: Unique gateway name (lowercase, alphanumeric with hyphens)
          pattern: "^[a-z0-9-]+$"
          minLength: 1
          maxLength: 64
          example: ai-gateway-prod
        displayName:
          type: string
          description: Human-readable display name
          minLength: 1
          maxLength: 128
          example: Production AI Gateway
        gatewayType:
          $ref: "#/components/schemas/GatewayType"
        vhost:
          type: string
          description: Virtual host for the gateway (FQDN or IP)
          minLength: 1
          maxLength: 253
          example: api.production.example.com
        region:
          type: string
          description: Deployment region (optional)
          example: us-east-1
        isCritical:
          type: boolean
          description: Flag indicating if this is a critical production gateway
          default: false
          example: true
        environmentIds:
          type: array
          description: List of environment UUIDs to assign the gateway to during creation
          items:
            type: string
          example:
            - 550e8400-e29b-41d4-a716-446655440000
            - 550e8400-e29b-41d4-a716-446655440001

    UpdateGatewayRequest:
      type: object
      minProperties: 1
      description: Update request for gateway properties (all fields optional, but at least one must be provided)
      properties:
        displayName:
          type: string
          description: Updated display name
          minLength: 1
          maxLength: 128
          example: Production AI Gateway (Updated)
        isCritical:
          type: boolean
          description: Updated critical flag
          example: false
        status:
          $ref: "#/components/schemas/GatewayStatus"

    GatewayListResponse:
      type: object
      required:
        - gateways
        - total
        - limit
        - offset
      properties:
        gateways:
          type: array
          items:
            $ref: "#/components/schemas/GatewayResponse"
        total:
          type: integer
          format: int32
          description: Total number of gateways matching the filter
          example: 5
        limit:
          type: integer
          format: int32
          description: Number of results per page
          example: 20
        offset:
          type: integer
          format: int32
          description: Number of results skipped
          example: 0

    HealthStatusResponse:
      type: object
      required:
        - gatewayId
        - status
        - checkedAt
      properties:
        gatewayId:
          type: string
          description: UUID of the gateway that was checked
          example: 7c4a8d09-ca3f-4b0a-82e9-2e85b96dd8a7
        status:
          type: string
          description: Health check result status
          enum:
            - HEALTHY
            - UNHEALTHY
            - UNREACHABLE
          example: HEALTHY
        responseTime:
          type: string
          description: Response time from the gateway (if reachable)
          example: 45ms
        errorMessage:
          type: string
          description: Error message if health check failed
          example: Connection timeout after 30s
        checkedAt:
          type: string
          format: date-time
          description: Timestamp when the health check was performed
          example: "2026-02-08T15:30:00Z"

    # ============================================
    # LLM PROVIDER TEMPLATE SCHEMAS
    # ============================================

    CreateLLMProviderTemplateRequest:
      type: object
      required:
        - id
        - name
      properties:
        id:
          type: string
          description: Unique handle for the template
          minLength: 1
          maxLength: 253
          example: openai
        name:
          type: string
          description: Human-readable LLM Template name
          minLength: 1
          maxLength: 253
          example: OpenAI
        description:
          type: string
          description: Description of the LLM provider template
          maxLength: 1023
          example: Default OpenAI template
        metadata:
          $ref: "#/components/schemas/LLMProviderTemplateMetadata"
        promptTokens:
          $ref: "#/components/schemas/ExtractionIdentifier"
        completionTokens:
          $ref: "#/components/schemas/ExtractionIdentifier"
        totalTokens:
          $ref: "#/components/schemas/ExtractionIdentifier"
        remainingTokens:
          $ref: "#/components/schemas/ExtractionIdentifier"
        requestModel:
          $ref: "#/components/schemas/ExtractionIdentifier"
        responseModel:
          $ref: "#/components/schemas/ExtractionIdentifier"

    UpdateLLMProviderTemplateRequest:
      type: object
      minProperties: 1
      properties:
        name:
          type: string
          description: Updated name of the template
          minLength: 1
          maxLength: 253
        description:
          type: string
          description: Updated description
          maxLength: 1023
        metadata:
          $ref: "#/components/schemas/LLMProviderTemplateMetadata"
        promptTokens:
          $ref: "#/components/schemas/ExtractionIdentifier"
        completionTokens:
          $ref: "#/components/schemas/ExtractionIdentifier"
        totalTokens:
          $ref: "#/components/schemas/ExtractionIdentifier"
        remainingTokens:
          $ref: "#/components/schemas/ExtractionIdentifier"
        requestModel:
          $ref: "#/components/schemas/ExtractionIdentifier"
        responseModel:
          $ref: "#/components/schemas/ExtractionIdentifier"

    LLMProviderTemplateResponse:
      type: object
      required:
        - uuid
        - id
        - name
      properties:
        uuid:
          type: string
          format: uuid
          description: UUID of the template
          readOnly: true
          example: 550e8400-e29b-41d4-a716-446655440000
        id:
          type: string
          description: Unique handle for the template
          example: openai
        name:
          type: string
          description: Human-readable LLM Template name
          example: OpenAI
        description:
          type: string
          description: Description of the LLM provider template
          example: Default OpenAI template
        createdBy:
          type: string
          description: Username of the creator
          readOnly: true
          example: jane.doe
        metadata:
          $ref: "#/components/schemas/LLMProviderTemplateMetadata"
        promptTokens:
          $ref: "#/components/schemas/ExtractionIdentifier"
        completionTokens:
          $ref: "#/components/schemas/ExtractionIdentifier"
        totalTokens:
          $ref: "#/components/schemas/ExtractionIdentifier"
        remainingTokens:
          $ref: "#/components/schemas/ExtractionIdentifier"
        requestModel:
          $ref: "#/components/schemas/ExtractionIdentifier"
        responseModel:
          $ref: "#/components/schemas/ExtractionIdentifier"
        createdAt:
          type: string
          format: date-time
          description: Timestamp when the resource was created
          readOnly: true
          example: "2023-10-12T10:30:00Z"
        updatedAt:
          type: string
          format: date-time
          description: Timestamp when the resource was last updated
          readOnly: true
          example: "2023-10-12T10:30:00Z"

    LLMProviderTemplateListResponse:
      type: object
      required:
        - templates
        - total
        - limit
        - offset
      properties:
        templates:
          type: array
          items:
            $ref: "#/components/schemas/LLMProviderTemplateResponse"
        total:
          type: integer
          format: int32
          description: Total number of templates
        limit:
          type: integer
          format: int32
          description: Number of results per page
        offset:
          type: integer
          format: int32
          description: Number of results skipped

    # ============================================
    # LLM PROVIDER SCHEMAS
    # ============================================

    CreateLLMProviderRequest:
      type: object
      required:
        - templateUuid
        - configuration
      properties:
        description:
          type: string
          description: Description of the LLM provider
          example: OpenAI GPT-4 provider for production
        templateUuid:
          type: string
          format: uuid
          description: UUID of the provider template to use
          example: 550e8400-e29b-41d4-a716-446655440000
        openapi:
          type: string
          description: Custom OpenAPI specification (overrides template)
        modelList:
          type: array
          description: Custom model list (overrides template)
          items:
            $ref: "#/components/schemas/LLMModelProvider"
        configuration:
          $ref: "#/components/schemas/LLMProviderConfig"
        gateways:
          type: array
          items:
            type: string
            format: uuid

    UpdateLLMProviderRequest:
      type: object
      minProperties: 1
      properties:
        description:
          type: string
          description: Updated description
        templateUuid:
          type: string
          format: uuid
          description: Updated template UUID
        openapi:
          type: string
          description: Updated OpenAPI specification
        modelList:
          type: array
          description: Updated model list
          items:
            $ref: "#/components/schemas/LLMModelProvider"
        configuration:
          $ref: "#/components/schemas/LLMProviderConfig"
        gateways:
          type: array
          items:
            type: string
            format: uuid

    UpdateLLMProviderCatalogRequest:
      type: object
      required:
        - inCatalog
      properties:
        inCatalog:
          type: boolean
          description: |
            Whether the provider should be available in the catalog.
            - true: Add to catalog (makes it discoverable for agent configurations)
            - false: Remove from catalog (hides from catalog queries)
          example: true

    LLMProviderResponse:
      type: object
      required:
        - uuid
        - templateUuid
        - status
        - configuration
      properties:
        uuid:
          type: string
          format: uuid
          description: UUID of the provider
        description:
          type: string
          description: Provider description
        createdBy:
          type: string
          description: User who created the provider
        templateUuid:
          type: string
          format: uuid
          description: Template UUID
        openapi:
          type: string
          description: OpenAPI specification
        modelProviders:
          type: array
          description: List of model providers
          items:
            $ref: "#/components/schemas/LLMModelProvider"
        status:
          type: string
          description: Provider status
        configuration:
          $ref: "#/components/schemas/LLMProviderConfig"
        artifact:
          $ref: "#/components/schemas/Artifact"
        gateways:
          type: array
          items:
            type: string
            format: uuid
        inCatalog:
          type: boolean
          description: Whether the provider is available in the catalog
          example: true

    LLMProviderListResponse:
      type: object
      required:
        - providers
        - total
        - limit
        - offset
      properties:
        providers:
          type: array
          items:
            $ref: "#/components/schemas/LLMProviderResponse"
        total:
          type: integer
          format: int32
        limit:
          type: integer
          format: int32
        offset:
          type: integer
          format: int32

    LLMProviderConfig:
      type: object
      properties:
        name:
          type: string
          description: Configuration name
          example: openai-gpt4
        version:
          type: string
          description: Configuration version
          example: v1
        context:
          type: string
          description: API context path
          example: /openai
        vhost:
          type: string
          description: Virtual host
          example: api.example.com
        template:
          type: string
          description: Template name
        upstream:
          $ref: "#/components/schemas/UpstreamConfig"
        accessControl:
          $ref: "#/components/schemas/LLMAccessControl"
        rateLimiting:
          $ref: "#/components/schemas/LLMRateLimitingConfig"
        policies:
          type: array
          items:
            $ref: "#/components/schemas/LLMPolicy"
        security:
          $ref: "#/components/schemas/SecurityConfig"

    # ============================================
    # LLM PROXY SCHEMAS
    # ============================================

    CreateLLMProxyRequest:
      type: object
      required:
        - providerUuid
        - configuration
      properties:
        description:
          type: string
          description: Description of the LLM proxy
        providerUuid:
          type: string
          format: uuid
          description: UUID of the LLM provider
        openapi:
          type: string
          description: Custom OpenAPI specification
        configuration:
          $ref: "#/components/schemas/LLMProxyConfig"

    UpdateLLMProxyRequest:
      type: object
      minProperties: 1
      properties:
        description:
          type: string
          description: Updated description
        providerUuid:
          type: string
          format: uuid
          description: Updated provider UUID
        openapi:
          type: string
          description: Updated OpenAPI specification
        configuration:
          $ref: "#/components/schemas/LLMProxyConfig"

    LLMProxyResponse:
      type: object
      required:
        - uuid
        - projectId
        - providerUuid
        - status
        - configuration
      properties:
        uuid:
          type: string
          format: uuid
          description: UUID of the proxy
        projectId:
          type: string
          format: uuid
          description: Project UUID
        description:
          type: string
          description: Proxy description
        createdBy:
          type: string
          description: User who created the proxy
        providerUuid:
          type: string
          format: uuid
          description: Provider UUID
        openapi:
          type: string
          description: OpenAPI specification
        status:
          type: string
          description: Proxy status
        configuration:
          $ref: "#/components/schemas/LLMProxyConfig"
        artifact:
          $ref: "#/components/schemas/Artifact"

    LLMProxyListResponse:
      type: object
      required:
        - proxies
        - total
        - limit
        - offset
      properties:
        proxies:
          type: array
          items:
            $ref: "#/components/schemas/LLMProxyResponse"
        total:
          type: integer
          format: int32
        limit:
          type: integer
          format: int32
        offset:
          type: integer
          format: int32

    LLMProxyConfig:
      type: object
      properties:
        name:
          type: string
          description: Proxy name
        version:
          type: string
          description: Proxy version
        context:
          type: string
          description: API context path
        vhost:
          type: string
          description: Virtual host
        provider:
          type: string
          description: Provider reference
        policies:
          type: array
          items:
            $ref: "#/components/schemas/LLMPolicy"
        security:
          $ref: "#/components/schemas/SecurityConfig"

    # ============================================
    # NESTED LLM CONFIGURATION SCHEMAS
    # ============================================

    LLMModelProvider:
      type: object
      required:
        - id
      properties:
        id:
          type: string
          description: Provider ID
          example: openai
        name:
          type: string
          description: Provider name
          example: OpenAI
        models:
          type: array
          items:
            $ref: "#/components/schemas/LLMModel"

    LLMModel:
      type: object
      required:
        - id
      properties:
        id:
          type: string
          description: Model ID
          example: gpt-4
        name:
          type: string
          description: Model name
          example: GPT-4
        description:
          type: string
          description: Model description
          example: Most capable GPT-4 model

    ExtractionIdentifier:
      type: object
      required:
        - location
        - identifier
      properties:
        location:
          type: string
          description: Where to find the token information
          enum:
            - payload
            - header
            - queryParam
            - pathParam
          example: payload
        identifier:
          type: string
          description: JSONPath or other identifier to extract the value
          example: $.usage.prompt_tokens

    LLMProviderTemplateMetadata:
      type: object
      properties:
        endpointUrl:
          type: string
          format: uri
          description: Default endpoint URL for the template
          example: https://api.openai.com
        auth:
          $ref: "#/components/schemas/LLMProviderTemplateAuth"
        logoUrl:
          type: string
          format: uri
          description: URL of the provider logo
          example: https://cdn.example.com/logos/openai.svg
        openapiSpecUrl:
          type: string
          format: uri
          description: URL to the OpenAPI specification for the provider
          example: https://api.openai.com/openapi.json

    LLMProviderTemplateAuth:
      type: object
      properties:
        type:
          type: string
          description: Authentication type
          example: bearer
        header:
          type: string
          description: Header name for authentication
          example: Authorization
        valuePrefix:
          type: string
          description: Prefix for the authentication value
          example: Bearer

    UpstreamConfig:
      type: object
      properties:
        main:
          $ref: "#/components/schemas/UpstreamEndpoint"
        sandbox:
          $ref: "#/components/schemas/UpstreamEndpoint"

    UpstreamEndpoint:
      type: object
      properties:
        url:
          type: string
          description: Upstream endpoint URL
          example: https://api.openai.com
        ref:
          type: string
          description: Reference to endpoint configuration
        auth:
          $ref: "#/components/schemas/UpstreamAuth"

    UpstreamAuth:
      type: object
      required:
        - type
      properties:
        type:
          type: string
          description: Authentication type
          enum:
            - apiKey
            - bearer
            - basic
            - none
          example: bearer
        header:
          type: string
          description: Authentication header name
          example: Authorization
        value:
          type: string
          description: Authentication value/token
          example: Bearer sk-...

    LLMAccessControl:
      type: object
      required:
        - mode
      properties:
        mode:
          type: string
          description: Access control mode
          enum:
            - allow
            - deny
          example: allow
        exceptions:
          type: array
          items:
            $ref: "#/components/schemas/RouteException"

    RouteException:
      type: object
      required:
        - path
        - methods
      properties:
        path:
          type: string
          description: Route path pattern
          example: /health
        methods:
          type: array
          items:
            type: string
          description: HTTP methods
          example:
            - GET
            - POST

    LLMPolicy:
      type: object
      required:
        - name
        - version
        - paths
      properties:
        name:
          type: string
          description: Policy name
          example: rate-limiter
        version:
          type: string
          description: Policy version
          example: v1
        paths:
          type: array
          items:
            $ref: "#/components/schemas/LLMPolicyPath"

    LLMPolicyPath:
      type: object
      required:
        - path
        - methods
      properties:
        path:
          type: string
          description: Path pattern
          example: /v1/chat/completions
        methods:
          type: array
          items:
            type: string
          example:
            - POST
        params:
          type: object
          additionalProperties: true
          description: Policy parameters

    LLMRateLimitingConfig:
      type: object
      properties:
        providerLevel:
          $ref: "#/components/schemas/RateLimitingScopeConfig"
        consumerLevel:
          $ref: "#/components/schemas/RateLimitingScopeConfig"

    RateLimitingScopeConfig:
      type: object
      properties:
        global:
          $ref: "#/components/schemas/RateLimitingLimitConfig"
        resourceWise:
          $ref: "#/components/schemas/ResourceWiseRateLimitingConfig"

    ResourceWiseRateLimitingConfig:
      type: object
      required:
        - default
        - resources
      properties:
        default:
          $ref: "#/components/schemas/RateLimitingLimitConfig"
        resources:
          type: array
          items:
            $ref: "#/components/schemas/RateLimitingResourceLimit"

    RateLimitingResourceLimit:
      type: object
      required:
        - resource
        - limit
      properties:
        resource:
          type: string
          description: Resource identifier
          example: /v1/chat/completions
        limit:
          $ref: "#/components/schemas/RateLimitingLimitConfig"

    RateLimitingLimitConfig:
      type: object
      properties:
        request:
          $ref: "#/components/schemas/RequestRateLimit"
        token:
          $ref: "#/components/schemas/TokenRateLimit"
        cost:
          $ref: "#/components/schemas/CostRateLimit"

    RequestRateLimit:
      type: object
      required:
        - enabled
        - count
        - reset
      properties:
        enabled:
          type: boolean
          description: Whether request rate limiting is enabled
        count:
          type: integer
          description: Maximum number of requests
          example: 100
        reset:
          $ref: "#/components/schemas/RateLimitResetWindow"

    TokenRateLimit:
      type: object
      required:
        - enabled
        - count
        - reset
      properties:
        enabled:
          type: boolean
          description: Whether token rate limiting is enabled
        count:
          type: integer
          description: Maximum number of tokens
          example: 100000
        reset:
          $ref: "#/components/schemas/RateLimitResetWindow"

    CostRateLimit:
      type: object
      required:
        - enabled
        - amount
        - reset
      properties:
        enabled:
          type: boolean
          description: Whether cost rate limiting is enabled
        amount:
          type: number
          format: double
          description: Maximum cost amount
          example: 100.0
        reset:
          $ref: "#/components/schemas/RateLimitResetWindow"

    RateLimitResetWindow:
      type: object
      required:
        - duration
        - unit
      properties:
        duration:
          type: integer
          description: Reset window duration
          example: 1
        unit:
          type: string
          description: Time unit
          enum:
            - second
            - minute
            - hour
            - day
          example: hour

    SecurityConfig:
      type: object
      properties:
        enabled:
          type: boolean
          description: Whether security is enabled
          example: true
        apiKey:
          $ref: "#/components/schemas/APIKeySecurity"

    APIKeySecurity:
      type: object
      properties:
        enabled:
          type: boolean
          description: Whether API key security is enabled
        key:
          type: string
          description: API key parameter name
          example: api-key
        in:
          type: string
          description: Where the API key is located
          enum:
            - header
            - query
            - cookie
          example: header

    Artifact:
      type: object
      properties:
        uuid:
          type: string
          format: uuid
          description: Artifact UUID
        name:
          type: string
          description: Artifact name
        displayName:
          type: string
          description: Artifact display name
        description:
          type: string
          description: Artifact description
        status:
          type: string
          description: Artifact status

    # ============================================================================
    # Evaluation Score Schemas
    # ============================================================================

    EvaluationScoreResponse:
      type: object
      required:
        - id
        - evaluatorName
        - level
        - traceId
      properties:
        id:
          type: string
        evaluatorName:
          type: string
        level:
          type: string
          enum: [trace, agent, span]
        traceId:
          type: string
        spanId:
          type: string
        score:
          type: number
          format: double
          nullable: true
          minimum: 0
          maximum: 1
        explanation:
          type: string
        traceTimestamp:
          type: string
          format: date-time
        metadata:
          type: object
          additionalProperties: true
        error:
          type: string

    EvaluationAggregateResponse:
      type: object
      required:
        - evaluatorName
        - level
        - count
      properties:
        evaluatorName:
          type: string
        level:
          type: string
          enum: [trace, agent, span]
        count:
          type: integer
        mean:
          type: number
          format: double
        passRate:
          type: number
          format: double

    RunScoresResponse:
      type: object
      required:
        - aggregates
        - scores
        - total
      properties:
        aggregates:
          type: array
          items:
            $ref: "#/components/schemas/EvaluationAggregateResponse"
        scores:
          type: array
          items:
            $ref: "#/components/schemas/EvaluationScoreResponse"
        total:
          type: integer
          description: Total number of individual scores (for pagination)

    TimeSeriesPoint:
      type: object
      required:
        - timestamp
        - count
        - errorCount
        - aggregations
      properties:
        timestamp:
          type: string
          format: date-time
          description: Timestamp of the bucket
        count:
          type: integer
          description: Total number of scores in this bucket
        errorCount:
          type: integer
          description: Number of scores with errors in this bucket
        aggregations:
          type: object
          description: Flexible aggregation data (mean, pass_rate, custom metrics, etc.)
          additionalProperties: true

    TimeSeriesResponse:
      type: object
      required:
        - monitorName
        - evaluatorName
        - granularity
        - points
      properties:
        monitorName:
          type: string
          description: Name of the monitor
        evaluatorName:
          type: string
          description: Display name of the evaluator
        granularity:
          type: string
          enum: [hour, day, week]
          description: Time bucket granularity
        points:
          type: array
          items:
            $ref: "#/components/schemas/TimeSeriesPoint"

    TraceScoreGroup:
      type: object
      required:
        - evaluatorName
        - level
        - scores
      properties:
        evaluatorName:
          type: string
        level:
          type: string
          enum: [trace, agent, span]
        scores:
          type: array
          items:
            $ref: "#/components/schemas/EvaluationScoreResponse"

    TraceEvaluationResponse:
      type: object
      required:
        - traceId
        - evaluators
      properties:
        traceId:
          type: string
        evaluators:
          type: array
          items:
            $ref: "#/components/schemas/TraceScoreGroup"

    MonitorScoresResponse:
      type: object
      required:
        - monitorName
        - timeRange
        - evaluators
      properties:
        monitorName:
          type: string
          description: Name of the monitor
        timeRange:
          $ref: "#/components/schemas/TimeRange"
        evaluators:
          type: array
          items:
            $ref: "#/components/schemas/EvaluatorScoreSummary"

    TimeRange:
      type: object
      required:
        - start
        - end
      properties:
        start:
          type: string
          format: date-time
          description: Start time of the range
        end:
          type: string
          format: date-time
          description: End time of the range

    EvaluatorScoreSummary:
      type: object
      required:
        - evaluatorName
        - level
        - count
        - errorCount
        - aggregations
      properties:
        evaluatorName:
          type: string
          description: Display name of the evaluator
        level:
          type: string
          enum: [trace, agent, span]
          description: Evaluation level
        count:
          type: integer
          description: Total number of scores
        errorCount:
          type: integer
          description: Number of scores with errors
        aggregations:
          type: object
          description: Flexible aggregation data (mean, pass_rate, custom metrics, etc.)
          additionalProperties: true

    TraceScoresResponse:
      type: object
      required:
        - traceId
        - monitors
      properties:
        traceId:
          type: string
          description: Trace ID
        monitors:
          type: array
          items:
            $ref: "#/components/schemas/MonitorTraceGroup"

    MonitorTraceGroup:
      type: object
      required:
        - monitorName
        - monitorId
        - runId
        - evaluators
      properties:
        monitorName:
          type: string
          description: Name of the monitor
        monitorId:
          type: string
          format: uuid
          description: ID of the monitor
        runId:
          type: string
          format: uuid
          description: ID of the run
        evaluators:
          type: array
          items:
            $ref: "#/components/schemas/EvaluatorTraceGroup"

    EvaluatorTraceGroup:
      type: object
      required:
        - evaluatorName
        - level
        - scores
      properties:
        evaluatorName:
          type: string
          description: Display name of the evaluator
        level:
          type: string
          enum: [trace, agent, span]
          description: Evaluation level
        scores:
          type: array
          items:
            $ref: "#/components/schemas/ScoreItem"

    ScoreItem:
      type: object
      properties:
        spanId:
          type: string
          nullable: true
          description: Span ID (if applicable)
        score:
          type: number
          format: float
          nullable: true
          minimum: 0
          maximum: 1
          description: Numeric score
        explanation:
          type: string
          nullable: true
          description: Explanation of the score
        metadata:
          type: object
          additionalProperties: true
          description: Additional metadata
        error:
          type: string
          nullable: true
          description: Error message if evaluation failed

    PublishScoreItem:
      type: object
      required:
        - displayName
        - level
        - traceId
      properties:
        displayName:
          type: string
        level:
          type: string
          enum: [trace, agent, span]
        traceId:
          type: string
        spanId:
          type: string
        score:
          type: number
          format: double
          minimum: 0
          maximum: 1
        explanation:
          type: string
        traceTimestamp:
          type: string
          format: date-time
        metadata:
          type: object
          additionalProperties: true
        error:
          type: string

    PublishAggregateItem:
      type: object
      required:
        - identifier
        - displayName
        - level
        - count
      properties:
        identifier:
          type: string
          description: Evaluator type/definition key
        displayName:
          type: string
          description: User-facing evaluator name
        level:
          type: string
          enum: [trace, agent, span]
        count:
          type: integer
        mean:
          type: number
          format: double
        passRate:
          type: number
          format: double

    PublishScoresRequest:
      type: object
      required:
        - scores
        - aggregates
      properties:
        scores:
          type: array
          items:
            $ref: "#/components/schemas/PublishScoreItem"
        aggregates:
          type: array
          items:
            $ref: "#/components/schemas/PublishAggregateItem"

    # ============================================
    # CATALOG SCHEMAS
    # ============================================

    CatalogEntry:
      type: object
      required:
        - uuid
        - handle
        - name
        - version
        - kind
        - inCatalog
        - createdAt
      properties:
        uuid:
          type: string
          format: uuid
          description: Unique identifier for the catalog entry
          example: "550e8400-e29b-41d4-a716-446655440000"
        handle:
          type: string
          description: Unique handle/identifier for the resource
          example: "openai-gpt4"
        name:
          type: string
          description: Human-readable name of the resource
          example: "OpenAI GPT-4"
        version:
          type: string
          description: Version of the resource
          example: "1.0.0"
        kind:
          type: string
          description: Type of resource
          enum:
            - LlmProvider
            - agent
            - mcp
          example: "LlmProvider"
        inCatalog:
          type: boolean
          description: Whether the resource is available in the catalog
          example: true
        createdAt:
          type: string
          format: date-time
          description: Timestamp when the entry was created
          example: "2024-01-15T10:30:00Z"

    CatalogListResponse:
      type: object
      required:
        - entries
        - total
        - limit
        - offset
      properties:
        entries:
          type: array
          description: List of catalog entries
          items:
            oneOf:
              - $ref: "#/components/schemas/CatalogEntry"
              - $ref: "#/components/schemas/CatalogLLMProviderEntry"
            discriminator:
              propertyName: kind
              mapping:
                LlmProvider: "#/components/schemas/CatalogLLMProviderEntry"
                agent: "#/components/schemas/CatalogEntry"
                mcp: "#/components/schemas/CatalogEntry"
        total:
          type: integer
          description: Total number of entries matching the filter
          example: 42
        limit:
          type: integer
          description: Maximum number of results returned
          example: 20
        offset:
          type: integer
          description: Number of results skipped
          example: 0

    CatalogLLMProviderEntry:
      type: object
      required:
        - uuid
        - handle
        - name
        - version
        - kind
        - inCatalog
        - status
        - template
        - createdAt
      properties:
        uuid:
          type: string
          format: uuid
          description: Unique identifier for the LLM provider
          example: "550e8400-e29b-41d4-a716-446655440000"
        handle:
          type: string
          description: Unique handle/identifier for the provider
          example: "openai-gpt4"
        name:
          type: string
          description: Human-readable name of the provider
          example: "OpenAI GPT-4"
        version:
          type: string
          description: Version of the provider
          example: "1.0.0"
        kind:
          type: string
          description: Resource type (always "LlmProvider" for this schema)
          enum:
            - LlmProvider
          example: "LlmProvider"
        inCatalog:
          type: boolean
          description: Whether the provider is available in the catalog
          example: true
        description:
          type: string
          description: Provider description
          example: "OpenAI GPT-4 LLM provider for advanced AI capabilities"
        createdBy:
          type: string
          description: User who created the provider
          example: "admin@example.com"
        status:
          type: string
          description: Provider status
          example: "active"
        template:
          type: string
          description: Template identifier used by this provider
          example: "openai-template"
        context:
          type: string
          description: API context path
          example: "/openai"
        vhost:
          type: string
          description: Virtual host
          example: "api.example.com"
        modelProviders:
          type: array
          description: List of model providers and their models
          items:
            $ref: "#/components/schemas/LLMModelProvider"
        security:
          $ref: "#/components/schemas/SecuritySummary"
        rateLimiting:
          $ref: "#/components/schemas/RateLimitingSummary"
        deployments:
          type: array
          description: List of deployments for this provider
          items:
            $ref: "#/components/schemas/DeploymentSummary"
        createdAt:
          type: string
          format: date-time
          description: Timestamp when the provider was created
          example: "2024-01-15T10:30:00Z"

    SecuritySummary:
      type: object
      description: Security configuration summary
      properties:
        enabled:
          type: boolean
          description: Whether security is enabled
          example: true
        apiKeyEnabled:
          type: boolean
          description: Whether API key security is enabled
          example: true
        apiKeyIn:
          type: string
          description: Where the API key is located (header/query/cookie)
          example: "header"

    RateLimitingSummary:
      type: object
      description: Rate limiting configuration summary
      properties:
        providerLevel:
          $ref: "#/components/schemas/RateLimitingScope"
        consumerLevel:
          $ref: "#/components/schemas/RateLimitingScope"

    RateLimitingScope:
      type: object
      description: Scope-level rate limiting summary
      properties:
        globalEnabled:
          type: boolean
          description: Whether global rate limiting is enabled
          example: true
        resourceWiseEnabled:
          type: boolean
          description: Whether resource-wise rate limiting is enabled
          example: false
        requestLimitCount:
          type: integer
          description: Request count limit (if enabled)
          example: 1000
        tokenLimitCount:
          type: integer
          description: Token count limit (if enabled)
          example: 50000
        costLimitAmount:
          type: number
          format: double
          description: Cost amount limit (if enabled)
          example: 100.50

    DeploymentSummary:
      type: object
      required:
        - gatewayId
        - gatewayName
        - status
      properties:
        gatewayId:
          type: string
          format: uuid
          description: Gateway UUID
          example: "660e8400-e29b-41d4-a716-446655440001"
        gatewayName:
          type: string
          description: Gateway name/identifier
          example: "production-gateway"
        environmentName:
          type: string
          description: Environment name (from gateway name or properties)
          example: "production"
        status:
          type: string
          description: Deployment status
          enum:
            - DEPLOYED
            - UNDEPLOYED
            - ARCHIVED
          example: "DEPLOYED"
        deployedAt:
          type: string
          format: date-time
          description: Timestamp when the resource was deployed
          example: "2026-01-15T10:30:00Z"
        vhost:
          type: string
          description: Gateway virtual host
          example: "api.prod.example.com"
