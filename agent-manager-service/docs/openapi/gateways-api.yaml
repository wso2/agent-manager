openapi: 3.0.3
info:
  title: Agent Manager - Gateways API
  description: |
    API for managing AI gateways within the Agent Manager platform.

    Gateways are AI gateway instances that handle traffic routing for AI agents. The platform
    supports both INGRESS (incoming traffic) and EGRESS (outgoing LLM/MCP traffic) gateway types.

    **Key Features:**
    - Register and manage AI gateways with pluggable adapter architecture
    - Support for INGRESS and EGRESS gateway types
    - Encrypted credential storage for gateway authentication
    - Map gateways to environments for organized deployment
    - Health checking and monitoring
    - Adapter-specific configuration management

    **Security:**
    - All endpoints require JWT authentication
    - Gateway credentials are encrypted before storage
    - Credentials are never returned in API responses
    - Organization-level isolation

  version: 1.0.0
  contact:
    name: WSO2 Support
    url: https://wso2.com/support
  license:
    name: Apache 2.0
    url: https://www.apache.org/licenses/LICENSE-2.0.html

servers:
  - url: http://localhost:8080
    description: Local development
  - url: https://api.agent-manager.wso2.com
    description: Production

tags:
  - name: Gateways
    description: AI gateway management operations
  - name: Gateway-Environment Mappings
    description: Operations for mapping gateways to environments
  - name: Health
    description: Gateway health check operations

security:
  - bearerAuth: []

paths:
  # ============================================
  # GATEWAY ENDPOINTS
  # ============================================

  /orgs/{orgName}/gateways:
    parameters:
      - $ref: '#/components/parameters/orgNamePath'

    get:
      tags:
        - Gateways
      summary: List all gateways
      description: |
        Retrieve a paginated list of all gateways for the organization.

        Supports filtering by gateway type, status, and environment.
      operationId: listGateways
      parameters:
        - $ref: '#/components/parameters/limitQuery'
        - $ref: '#/components/parameters/offsetQuery'
        - name: type
          in: query
          description: Filter by gateway type
          schema:
            $ref: '#/components/schemas/GatewayType'
        - name: status
          in: query
          description: Filter by gateway status
          schema:
            $ref: '#/components/schemas/GatewayStatus'
        - name: environment
          in: query
          description: Filter by environment name
          schema:
            type: string
      responses:
        '200':
          description: Successfully retrieved gateway list
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/GatewayListResponse'
              example:
                gateways:
                  - uuid: 7c4a8d09-ca3f-4b0a-82e9-2e85b96dd8a7
                    organizationId: 123e4567-e89b-12d3-a456-426614174000
                    name: ai-gateway-prod
                    displayName: Production AI Gateway
                    gatewayType: EGRESS
                    vhost: api.production.example.com
                    region: us-east-1
                    isCritical: true
                    status: ACTIVE
                    createdAt: '2026-01-15T10:30:00Z'
                    updatedAt: '2026-02-01T08:00:00Z'
                    environments:
                      - uuid: 550e8400-e29b-41d4-a716-446655440000
                        organizationId: 123e4567-e89b-12d3-a456-426614174000
                        name: production
                        displayName: Production Environment
                        createdAt: '2026-01-15T10:30:00Z'
                        updatedAt: '2026-01-15T10:30:00Z'
                total: 5
                limit: 20
                offset: 0
        '400':
          $ref: '#/components/responses/BadRequest'
        '401':
          $ref: '#/components/responses/Unauthorized'
        '500':
          $ref: '#/components/responses/InternalServerError'

    post:
      tags:
        - Gateways
      summary: Register a new gateway
      description: |
        Register a new AI gateway with the platform.

        **Gateway Types:**
        - INGRESS: Handles incoming API traffic
        - EGRESS: Handles outgoing LLM/MCP traffic (used for AI agents)

        **Security Note:**
        - Gateway credentials are encrypted before storage
        - Credentials are never returned in API responses
        - Use a strong encryption key configured in GATEWAY_ENCRYPTION_KEY

        **Adapter Configuration:**
        The adapterConfig field accepts adapter-specific configuration. The structure
        varies depending on the adapter type (on-premise, cloud, etc.).
      operationId: registerGateway
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/CreateGatewayRequest'
            examples:
              egressGateway:
                summary: EGRESS gateway for LLM traffic
                value:
                  name: ai-gateway-prod
                  displayName: Production AI Gateway
                  gatewayType: EGRESS
                  vhost: api.production.example.com
                  region: us-east-1
                  isCritical: true
                  adapterConfig:
                    apiEndpoint: https://gateway.example.com/api
                    timeout: 30s
                    retryCount: 3
                  credentials:
                    apiKey: sk-1234567890abcdef
              ingressGateway:
                summary: INGRESS gateway for API traffic
                value:
                  name: api-gateway-dev
                  displayName: Development API Gateway
                  gatewayType: INGRESS
                  vhost: api.dev.example.com
                  region: us-west-2
                  isCritical: false
                  credentials:
                    username: admin
                    password: secure-password-123
      responses:
        '201':
          description: Gateway registered successfully
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/GatewayResponse'
              example:
                uuid: 7c4a8d09-ca3f-4b0a-82e9-2e85b96dd8a7
                organizationId: 123e4567-e89b-12d3-a456-426614174000
                name: ai-gateway-prod
                displayName: Production AI Gateway
                gatewayType: EGRESS
                vhost: api.production.example.com
                region: us-east-1
                isCritical: true
                status: ACTIVE
                adapterConfig:
                  apiEndpoint: https://gateway.example.com/api
                  timeout: 30s
                  retryCount: 3
                createdAt: '2026-02-08T10:30:00Z'
                updatedAt: '2026-02-08T10:30:00Z'
        '400':
          $ref: '#/components/responses/BadRequest'
        '401':
          $ref: '#/components/responses/Unauthorized'
        '409':
          $ref: '#/components/responses/Conflict'
        '500':
          $ref: '#/components/responses/InternalServerError'

  /orgs/{orgName}/gateways/{gatewayID}:
    parameters:
      - $ref: '#/components/parameters/orgNamePath'
      - $ref: '#/components/parameters/gatewayIDPath'

    get:
      tags:
        - Gateways
      summary: Get gateway details
      description: |
        Retrieve detailed information about a specific gateway, including mapped environments.

        **Security Note:** Credentials are never returned in the response.
      operationId: getGateway
      responses:
        '200':
          description: Successfully retrieved gateway
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/GatewayResponse'
              example:
                uuid: 7c4a8d09-ca3f-4b0a-82e9-2e85b96dd8a7
                organizationId: 123e4567-e89b-12d3-a456-426614174000
                name: ai-gateway-prod
                displayName: Production AI Gateway
                gatewayType: EGRESS
                controlPlaneUrl: https://gateway-control.example.com
                vhost: api.production.example.com
                region: us-east-1
                isCritical: true
                status: ACTIVE
                adapterConfig:
                  apiEndpoint: https://gateway.example.com/api
                  timeout: 30s
                createdAt: '2026-01-15T10:30:00Z'
                updatedAt: '2026-02-01T08:00:00Z'
                environments:
                  - uuid: 550e8400-e29b-41d4-a716-446655440000
                    organizationId: 123e4567-e89b-12d3-a456-426614174000
                    name: production
                    displayName: Production Environment
                    createdAt: '2026-01-15T10:30:00Z'
                    updatedAt: '2026-01-15T10:30:00Z'
        '400':
          $ref: '#/components/responses/BadRequest'
        '401':
          $ref: '#/components/responses/Unauthorized'
        '404':
          $ref: '#/components/responses/NotFound'
        '500':
          $ref: '#/components/responses/InternalServerError'

    put:
      tags:
        - Gateways
      summary: Update gateway
      description: |
        Update an existing gateway's properties.

        **Updatable Fields:**
        - Display name
        - Critical flag
        - Status
        - Adapter configuration
        - Credentials (re-encrypted on update)

        **Immutable Fields:**
        - Gateway name
        - Gateway type
        - VHost
        - Organization

        **Security Note:** Credentials are re-encrypted if updated.
      operationId: updateGateway
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/UpdateGatewayRequest'
            examples:
              updateDisplayName:
                summary: Update display name and critical flag
                value:
                  displayName: Production AI Gateway (Updated)
                  isCritical: false
              updateStatus:
                summary: Update gateway status
                value:
                  status: INACTIVE
              updateCredentials:
                summary: Update gateway credentials
                value:
                  credentials:
                    apiKey: sk-new-key-9876543210fedcba
              updateAdapterConfig:
                summary: Update adapter configuration
                value:
                  adapterConfig:
                    apiEndpoint: https://gateway-new.example.com/api
                    timeout: 60s
                    retryCount: 5
      responses:
        '200':
          description: Gateway updated successfully
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/GatewayResponse'
              example:
                uuid: 7c4a8d09-ca3f-4b0a-82e9-2e85b96dd8a7
                organizationId: 123e4567-e89b-12d3-a456-426614174000
                name: ai-gateway-prod
                displayName: Production AI Gateway (Updated)
                gatewayType: EGRESS
                vhost: api.production.example.com
                region: us-east-1
                isCritical: false
                status: ACTIVE
                createdAt: '2026-01-15T10:30:00Z'
                updatedAt: '2026-02-08T15:30:00Z'
        '400':
          $ref: '#/components/responses/BadRequest'
        '401':
          $ref: '#/components/responses/Unauthorized'
        '404':
          $ref: '#/components/responses/NotFound'
        '500':
          $ref: '#/components/responses/InternalServerError'

    delete:
      tags:
        - Gateways
      summary: Deregister gateway
      description: |
        Soft delete a gateway. This will:
        - Mark the gateway as deleted
        - Remove all gateway-environment mappings
        - Preserve gateway data for audit/recovery

        The gateway can be restored if needed by contacting support.

        **Warning:** This operation will affect all environments using this gateway.
      operationId: deleteGateway
      responses:
        '204':
          description: Gateway deregistered successfully
        '400':
          $ref: '#/components/responses/BadRequest'
        '401':
          $ref: '#/components/responses/Unauthorized'
        '404':
          $ref: '#/components/responses/NotFound'
        '500':
          $ref: '#/components/responses/InternalServerError'

  # ============================================
  # GATEWAY-ENVIRONMENT MAPPING ENDPOINTS
  # ============================================

  /orgs/{orgName}/gateways/{gatewayID}/environments:
    parameters:
      - $ref: '#/components/parameters/orgNamePath'
      - $ref: '#/components/parameters/gatewayIDPath'

    get:
      tags:
        - Gateway-Environment Mappings
      summary: Get gateway environments
      description: |
        List all environments mapped to a specific gateway.

        This shows which environments can use this gateway for routing traffic.
      operationId: getGatewayEnvironments
      responses:
        '200':
          description: Successfully retrieved environment list
          content:
            application/json:
              schema:
                type: object
                properties:
                  environments:
                    type: array
                    items:
                      $ref: '#/components/schemas/GatewayEnvironmentResponse'
              example:
                environments:
                  - uuid: 550e8400-e29b-41d4-a716-446655440000
                    organizationId: 123e4567-e89b-12d3-a456-426614174000
                    name: production
                    displayName: Production Environment
                    description: Production environment for critical AI agents
                    createdAt: '2026-01-15T10:30:00Z'
                    updatedAt: '2026-01-15T10:30:00Z'
                  - uuid: 660e8400-e29b-41d4-a716-446655440001
                    organizationId: 123e4567-e89b-12d3-a456-426614174000
                    name: staging
                    displayName: Staging Environment
                    description: Pre-production staging
                    createdAt: '2026-01-20T14:00:00Z'
                    updatedAt: '2026-01-20T14:00:00Z'
        '400':
          $ref: '#/components/responses/BadRequest'
        '401':
          $ref: '#/components/responses/Unauthorized'
        '404':
          $ref: '#/components/responses/NotFound'
        '500':
          $ref: '#/components/responses/InternalServerError'

  /orgs/{orgName}/gateways/{gatewayID}/environments/{envID}:
    parameters:
      - $ref: '#/components/parameters/orgNamePath'
      - $ref: '#/components/parameters/gatewayIDPath'
      - $ref: '#/components/parameters/envIDPath'

    post:
      tags:
        - Gateway-Environment Mappings
      summary: Assign gateway to environment
      description: |
        Create a mapping between a gateway and an environment.

        This makes the gateway available for use in the specified environment.
        A gateway can be mapped to multiple environments, and an environment can have
        multiple gateways.

        **Use Cases:**
        - Make a production gateway available in production environment
        - Share a gateway across multiple environments (dev, staging)
        - Set up multi-region gateway configurations
      operationId: assignGatewayToEnvironment
      responses:
        '201':
          description: Mapping created successfully
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/GatewayResponse'
              example:
                uuid: 7c4a8d09-ca3f-4b0a-82e9-2e85b96dd8a7
                organizationId: 123e4567-e89b-12d3-a456-426614174000
                name: ai-gateway-prod
                displayName: Production AI Gateway
                gatewayType: EGRESS
                vhost: api.production.example.com
                status: ACTIVE
                createdAt: '2026-01-15T10:30:00Z'
                updatedAt: '2026-02-08T10:30:00Z'
                environments:
                  - uuid: 550e8400-e29b-41d4-a716-446655440000
                    organizationId: 123e4567-e89b-12d3-a456-426614174000
                    name: production
                    displayName: Production Environment
                    createdAt: '2026-01-15T10:30:00Z'
                    updatedAt: '2026-01-15T10:30:00Z'
        '400':
          $ref: '#/components/responses/BadRequest'
        '401':
          $ref: '#/components/responses/Unauthorized'
        '404':
          $ref: '#/components/responses/NotFound'
        '409':
          description: Mapping already exists
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
              example:
                error: CONFLICT
                message: Gateway is already mapped to this environment
        '500':
          $ref: '#/components/responses/InternalServerError'

    delete:
      tags:
        - Gateway-Environment Mappings
      summary: Remove gateway from environment
      description: |
        Remove the mapping between a gateway and an environment.

        This makes the gateway unavailable in the specified environment.

        **Warning:** If agents in this environment are using this gateway, they may
        experience routing failures after this operation.
      operationId: removeGatewayFromEnvironment
      responses:
        '204':
          description: Mapping removed successfully
        '400':
          $ref: '#/components/responses/BadRequest'
        '401':
          $ref: '#/components/responses/Unauthorized'
        '404':
          description: Gateway, environment, or mapping not found
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
              example:
                error: NOT_FOUND
                message: Gateway-environment mapping not found
        '500':
          $ref: '#/components/responses/InternalServerError'

  # ============================================
  # HEALTH CHECK ENDPOINTS
  # ============================================

  /orgs/{orgName}/gateways/{gatewayID}/health:
    parameters:
      - $ref: '#/components/parameters/orgNamePath'
      - $ref: '#/components/parameters/gatewayIDPath'

    get:
      tags:
        - Health
      summary: Check gateway health
      description: |
        Perform a health check on the gateway by communicating with it via the configured adapter.

        This endpoint will:
        - Verify connectivity to the gateway
        - Check gateway operational status
        - Measure response time
        - Return detailed health information

        **Note:** The health check uses the gateway's stored credentials and adapter configuration.
      operationId: checkGatewayHealth
      responses:
        '200':
          description: Health check completed (status in response body)
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/HealthStatusResponse'
              examples:
                healthy:
                  summary: Gateway is healthy
                  value:
                    gatewayId: 7c4a8d09-ca3f-4b0a-82e9-2e85b96dd8a7
                    status: HEALTHY
                    responseTime: 45ms
                    checkedAt: '2026-02-08T15:30:00Z'
                unhealthy:
                  summary: Gateway is unhealthy
                  value:
                    gatewayId: 7c4a8d09-ca3f-4b0a-82e9-2e85b96dd8a7
                    status: UNHEALTHY
                    responseTime: 5000ms
                    errorMessage: Gateway returned error status 500
                    checkedAt: '2026-02-08T15:30:00Z'
                unreachable:
                  summary: Gateway is unreachable
                  value:
                    gatewayId: 7c4a8d09-ca3f-4b0a-82e9-2e85b96dd8a7
                    status: UNREACHABLE
                    errorMessage: Connection timeout after 30s
                    checkedAt: '2026-02-08T15:30:00Z'
        '400':
          $ref: '#/components/responses/BadRequest'
        '401':
          $ref: '#/components/responses/Unauthorized'
        '404':
          $ref: '#/components/responses/NotFound'
        '500':
          $ref: '#/components/responses/InternalServerError'

# ============================================
# COMPONENTS
# ============================================

components:
  securitySchemes:
    bearerAuth:
      type: http
      scheme: bearer
      bearerFormat: JWT
      description: JWT token for authentication

  parameters:
    orgNamePath:
      name: orgName
      in: path
      required: true
      description: Organization name/handle
      schema:
        type: string
        pattern: '^[a-z0-9-]+$'
        minLength: 1
        maxLength: 64
      example: acme

    gatewayIDPath:
      name: gatewayID
      in: path
      required: true
      description: Gateway UUID or name
      schema:
        type: string
      example: ai-gateway-prod

    envIDPath:
      name: envID
      in: path
      required: true
      description: Environment UUID or name
      schema:
        type: string
      example: production

    limitQuery:
      name: limit
      in: query
      description: Maximum number of results to return
      schema:
        type: integer
        format: int32
        minimum: 1
        maximum: 100
        default: 20
      example: 20

    offsetQuery:
      name: offset
      in: query
      description: Number of results to skip
      schema:
        type: integer
        format: int32
        minimum: 0
        default: 0
      example: 0

  schemas:
    # ============================================
    # GATEWAY SCHEMAS
    # ============================================

    GatewayType:
      type: string
      enum:
        - INGRESS
        - EGRESS
      description: |
        Gateway type:
        - INGRESS: Handles incoming API traffic
        - EGRESS: Handles outgoing LLM/MCP traffic (used for AI agents)
      example: EGRESS

    GatewayStatus:
      type: string
      enum:
        - ACTIVE
        - INACTIVE
        - PROVISIONING
        - ERROR
      description: |
        Gateway operational status:
        - ACTIVE: Gateway is operational and ready
        - INACTIVE: Gateway is registered but not active
        - PROVISIONING: Gateway is being set up
        - ERROR: Gateway has encountered an error
      example: ACTIVE

    GatewayCredentials:
      type: object
      description: |
        Authentication credentials for gateway access.

        **Security:**
        - At least one credential type should be provided
        - Credentials are encrypted before storage
        - Never returned in API responses
        - Re-encrypted when updated

        **Supported Credential Types:**
        - Basic auth: username + password
        - API key: apiKey
        - Bearer token: token
      properties:
        username:
          type: string
          description: Basic authentication username
          example: admin
        password:
          type: string
          description: Basic authentication password
          format: password
          example: secure-password-123
        apiKey:
          type: string
          description: API key for authentication
          example: sk-1234567890abcdef
        token:
          type: string
          description: Bearer token for authentication
          example: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9...

    GatewayResponse:
      type: object
      required:
        - uuid
        - organizationId
        - name
        - displayName
        - gatewayType
        - vhost
        - isCritical
        - status
        - createdAt
        - updatedAt
      properties:
        uuid:
          type: string
          format: uuid
          description: Unique identifier for the gateway
          example: 7c4a8d09-ca3f-4b0a-82e9-2e85b96dd8a7
        organizationId:
          type: string
          format: uuid
          description: Organization UUID
          example: 123e4567-e89b-12d3-a456-426614174000
        name:
          type: string
          description: Unique gateway name (lowercase, alphanumeric with hyphens)
          pattern: '^[a-z0-9-]+$'
          maxLength: 64
          example: ai-gateway-prod
        displayName:
          type: string
          description: Human-readable display name
          maxLength: 128
          example: Production AI Gateway
        gatewayType:
          $ref: '#/components/schemas/GatewayType'
        controlPlaneUrl:
          type: string
          format: uri
          description: URL of the gateway's control plane (if applicable)
          example: https://gateway-control.example.com
        vhost:
          type: string
          description: Virtual host for the gateway
          maxLength: 253
          example: api.production.example.com
        region:
          type: string
          description: Deployment region
          example: us-east-1
        isCritical:
          type: boolean
          description: Flag indicating if this is a critical production gateway
          example: true
        status:
          $ref: '#/components/schemas/GatewayStatus'
        adapterConfig:
          type: object
          description: |
            Adapter-specific configuration (structure varies by adapter type).

            **On-Premise Adapter Example:**
            ```json
            {
              "apiEndpoint": "https://gateway.example.com/api",
              "timeout": "30s",
              "retryCount": 3,
              "maxConcurrentRequests": 100
            }
            ```

            **Cloud Adapter Example:**
            ```json
            {
              "cloudProvider": "aws",
              "region": "us-east-1",
              "instanceId": "i-1234567890abcdef"
            }
            ```
          additionalProperties: true
          example:
            apiEndpoint: https://gateway.example.com/api
            timeout: 30s
            retryCount: 3
        createdAt:
          type: string
          format: date-time
          description: Timestamp when the gateway was registered
          example: '2026-01-15T10:30:00Z'
        updatedAt:
          type: string
          format: date-time
          description: Timestamp when the gateway was last updated
          example: '2026-02-01T08:00:00Z'
        environments:
          type: array
          description: List of environments mapped to this gateway
          items:
            $ref: '#/components/schemas/GatewayEnvironmentResponse'

    CreateGatewayRequest:
      type: object
      required:
        - name
        - displayName
        - gatewayType
        - vhost
      properties:
        name:
          type: string
          description: |
            Unique gateway name (lowercase, alphanumeric with hyphens).

            Must be unique within the organization.
          pattern: '^[a-z0-9-]+$'
          minLength: 1
          maxLength: 64
          example: ai-gateway-prod
        displayName:
          type: string
          description: Human-readable display name
          minLength: 1
          maxLength: 128
          example: Production AI Gateway
        gatewayType:
          $ref: '#/components/schemas/GatewayType'
        vhost:
          type: string
          description: Virtual host for the gateway (FQDN or IP)
          minLength: 1
          maxLength: 253
          example: api.production.example.com
        region:
          type: string
          description: Deployment region (optional)
          example: us-east-1
        isCritical:
          type: boolean
          description: Flag indicating if this is a critical production gateway
          default: false
          example: true
        adapterConfig:
          type: object
          description: Adapter-specific configuration (structure varies by adapter type)
          additionalProperties: true
          example:
            apiEndpoint: https://gateway.example.com/api
            timeout: 30s
            retryCount: 3
        credentials:
          $ref: '#/components/schemas/GatewayCredentials'

    UpdateGatewayRequest:
      type: object
      minProperties: 1
      description: |
        Update request for gateway properties.

        All fields are optional, but at least one must be provided.
      properties:
        displayName:
          type: string
          description: Updated display name
          minLength: 1
          maxLength: 128
          example: Production AI Gateway (Updated)
        isCritical:
          type: boolean
          description: Updated critical flag
          example: false
        status:
          $ref: '#/components/schemas/GatewayStatus'
        adapterConfig:
          type: object
          description: Updated adapter configuration
          additionalProperties: true
          example:
            apiEndpoint: https://gateway-new.example.com/api
            timeout: 60s
        credentials:
          $ref: '#/components/schemas/GatewayCredentials'

    GatewayListResponse:
      type: object
      required:
        - gateways
        - total
        - limit
        - offset
      properties:
        gateways:
          type: array
          items:
            $ref: '#/components/schemas/GatewayResponse'
        total:
          type: integer
          format: int32
          description: Total number of gateways matching the filter
          example: 5
        limit:
          type: integer
          format: int32
          description: Number of results per page
          example: 20
        offset:
          type: integer
          format: int32
          description: Number of results skipped
          example: 0

    # ============================================
    # ENVIRONMENT SCHEMAS (for reference)
    # ============================================

    GatewayEnvironmentResponse:
      type: object
      required:
        - uuid
        - organizationId
        - name
        - displayName
        - createdAt
        - updatedAt
      properties:
        uuid:
          type: string
          format: uuid
          description: Unique identifier for the environment
          example: 550e8400-e29b-41d4-a716-446655440000
        organizationId:
          type: string
          format: uuid
          description: Organization UUID
          example: 123e4567-e89b-12d3-a456-426614174000
        name:
          type: string
          description: Unique environment name
          example: production
        displayName:
          type: string
          description: Human-readable display name
          example: Production Environment
        description:
          type: string
          description: Optional description
          example: Production environment for critical AI agents
        createdAt:
          type: string
          format: date-time
          example: '2026-01-15T10:30:00Z'
        updatedAt:
          type: string
          format: date-time
          example: '2026-01-15T10:30:00Z'

    # ============================================
    # HEALTH CHECK SCHEMAS
    # ============================================

    HealthStatusResponse:
      type: object
      required:
        - gatewayId
        - status
        - checkedAt
      properties:
        gatewayId:
          type: string
          format: uuid
          description: UUID of the gateway that was checked
          example: 7c4a8d09-ca3f-4b0a-82e9-2e85b96dd8a7
        status:
          type: string
          description: Health check result status
          enum:
            - HEALTHY
            - UNHEALTHY
            - UNREACHABLE
          example: HEALTHY
        responseTime:
          type: string
          description: Response time from the gateway (if reachable)
          example: 45ms
        errorMessage:
          type: string
          description: Error message if health check failed
          example: Connection timeout after 30s
        checkedAt:
          type: string
          format: date-time
          description: Timestamp when the health check was performed
          example: '2026-02-08T15:30:00Z'

    # ============================================
    # ERROR SCHEMAS
    # ============================================

    ErrorResponse:
      type: object
      required:
        - error
        - message
      properties:
        error:
          type: string
          description: Error code or type
          example: VALIDATION_ERROR
        message:
          type: string
          description: Human-readable error message
          example: Invalid request parameters
        details:
          type: object
          description: Additional error details (optional)
          additionalProperties: true
          example:
            field: name
            reason: Name must be lowercase alphanumeric with hyphens

  responses:
    BadRequest:
      description: Bad request - invalid parameters
      content:
        application/json:
          schema:
            $ref: '#/components/schemas/ErrorResponse'
          example:
            error: BAD_REQUEST
            message: Invalid request parameters

    Unauthorized:
      description: Unauthorized - invalid or missing authentication
      content:
        application/json:
          schema:
            $ref: '#/components/schemas/ErrorResponse'
          example:
            error: UNAUTHORIZED
            message: Invalid or missing authentication token

    NotFound:
      description: Resource not found
      content:
        application/json:
          schema:
            $ref: '#/components/schemas/ErrorResponse'
          example:
            error: NOT_FOUND
            message: Gateway not found

    Conflict:
      description: Conflict - resource already exists
      content:
        application/json:
          schema:
            $ref: '#/components/schemas/ErrorResponse'
          example:
            error: CONFLICT
            message: Gateway with this name already exists

    InternalServerError:
      description: Internal server error
      content:
        application/json:
          schema:
            $ref: '#/components/schemas/ErrorResponse'
          example:
            error: INTERNAL_ERROR
            message: An unexpected error occurred
